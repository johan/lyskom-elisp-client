2001-04-25  Joel Rosdahl  <joel@rosdahl.net>

	* swedish-strings.el (lyskom-message): "Gå ur" --> "Utträd ur".

	* swedish-strings.el (lyskom-custom-strings): Spelling.
	(lyskom-message): Ditto.
	(lyskom-menu): Ditto.

	* view-text.el (lyskom-print-header-recpt): Ditto.

	* english-strings.el (lyskom-message): Ditto.
	(lyskom-menu): Ditto.

	* utilities.el (lyskom-format-time): Ditto.

	* lyskom-rest.el (lyskom-format-aux-help): Ditto.

	* review.el: Ditto.

	* mship-edit.el (lyskom-read-time): Don't subtract 1900 from year.

2001-04-25  David Byers  <davby@ida.liu.se>

	* english-strings.el (lyskom-filter-actions): Add string for read
	filter action.

	* swedish-strings.el (lyskom-filter-actions): Add string for read
	filter action.

	* view-text.el (lyskom-view-text): Support "read" filter action.

	* commands1.el (lyskom-review-marked-texts): Use
	lyskom-review-get-priority to set priority of review operation.
	(lyskom-view-commented-text): Ditto.
	(lyskom-who-is-on-9): If user-active has not been used, do not
	show an idle time (say "Unknown" instead).

	* commands2.el (kom-review-faq): Ditto.

	* mship-edit.el (lyskom-read-time): Don't use lyskom-client-date.

	* slow.el (lyskom-slow-start-of-line-pos): New function.
	(kom-slow-click-or-yank): Use it.

2001-03-20  David Byers  <davby@ida.liu.se>

	* lyskom-buttons.el (lyskom-view-url-netscape): Use
	lyskom-accept-process-output instead of accept-process-output to
	minimize the likelyhood of an infinite resource-consuming loop.

2001-02-01  David Byers  <davby@ida.liu.se>

	* mship-edit.el (lp--create-buffer): Set initial state according
	to who added the membership.
	(lp--update-buffer): Same here.
	(lp--format-insert-entry): Draw expanded only according to state,
	no matter who added the membership.
	(lp--expand-all): New command.
	(lp--contract-all): New command.

	* compatibility.el (lyskom-face-foreground-name): New function.

	* mship-edit.el (lp--entry-set-background): Operate in the correct
	buffer. Make sure endpoints of extent are non-nil.
	(lp--entry-set-foreground): New function.
	(lp--format-entry): Color passive entries gray.

	* vars.el.in (lyskom-face-schemes): Added kom-dim-face.

2001-04-24  Johan Sundström  <jhs@lysator.liu.se>

	* utilities.el (lyskom-set-alist): New function.

	* commands1.el (lyskom-allocate-mark-type): Removed non-kosher use
	of cdar and set-alist; uses the above now instead.

2001-04-23  Joel Rosdahl  <joel@rosdahl.net>

	Clean-up of time handling and time formatting functions.
	Essentially, lyskom-format-time, lyskom-client-date-string and
	lyskom-return-date-and-time have been replaced with a single
	function: lyskom-format-time.  Also, the internal time
	representation now has years that are relative to year 0 and
	months that start with 1 for January.

	* view-text.el (lyskom-return-date-and-time): Removed.
	(lyskom-print-date-and-time): Removed.

	* utilities.el (lyskom-current-time): Removed.
	(lyskom-client-date): Removed.
	(lyskom-client-date-string): Removed.

	* swedish-strings.el (lyskom-message): New timeformat-* strings.

	* english-strings.el (lyskom-message): Ditto.

	* vars.el.in (kom-print-seconds-in-time-strings): New variable.

	* vars.el.in (kom-print-relative-dates): Renamed
	lyskom-print-complex-dates to kom-print-relative-dates.

	* lyskom-rest.el (lyskom-save-text): Ditto.

	* edit-text.el (lyskom-edit-fcc-text): Inhibit
	kom-print-relative-dates.

	* commands2.el (lyskom-memb-received): Inhibit
	kom-print-seconds-in-time-strings.
	(kom-status-conf): Ditto.
	(kom-status-person): Ditto.

	* option-edit.el (lyskom-customize-buffer-format): Added
	kom-print-relative-dates and kom-print-seconds-in-time strings.
	(lyskom-custom-variables): Ditto.

	* swedish-strings.el (lyskom-custom-strings): Ditto.

	* english-strings.el (lyskom-custom-strings): Ditto.

	* komtypes.el (lyskom-create-time): Added docstring note.

	* view-text.el (lyskom-calculate-day-diff): Use "new" time type.
	(lyskom-mx-date-to-time): Ditto.

	* parse.el (lyskom-parse-time): Ditto.

	* mship-edit.el (lp--format-entry-expansion): Ditto.

	* commands2.el (lyskom-print-summary-line): Ditto.
	(lyskom-print-mark-summary-line): Ditto.

	* commands1.el (kom-display-time): Ditto.
	(lyskom-nameday): Ditto.

	* commands1.el (lyskom-format-time): Removed.

	* utilities.el (lyskom-format-time): New function.

	* view-text.el (lyskom-view-text): Use new lyskom-format-time.
	(lyskom-print-header-recpt): Ditto.
	(lyskom-print-header-comm): Ditto.

	* startup.el (lyskom): Ditto.

	* remote-control.el (lyskom-remote-handler): Ditto.
	(lyskom-remote-set-message): Ditto.
	(lyskom-remote-autoreply): Ditto.
	(lyskom-remote-list-messages-1): Ditto.
	(lyskom-remote-erase-messages): Ditto.
	(lyskom-remote-quit): Ditto.

	* mship-edit.el (lp--format-entry): Ditto.
	(lp--format-entry-expansion): Ditto.

	* lyskom-rest.el (lyskom-sentinel): Ditto.

	* edit-text.el (lyskom-edit-fcc-text): Ditto.

	* commands2.el (lyskom-memb-received): Ditto.
	(kom-status-conf): Ditto.
	(kom-status-person): Ditto.

	* commands1.el (lyskom-who-is-on-8): Ditto.
	(lyskom-who-is-on-9): Ditto.
	(lyskom-insert-deferred-session-info-since): Ditto.
	(kom-list-clients): Ditto.
	(lyskom-status-session-9): Ditto.

	* commands1.el (kom-display-time): Ditto.

	* aux-items.el (lyskom-aux-item-info): Ditto.
	(lyskom-print-read-confirm): Ditto.

	* async.el (lyskom-format-as-personal-message): Ditto.

	* ansaphone.el (kom-toggle-auto-reply): Ditto.

	* utilities.el (lyskom-current-server-time): New function.

	* commands1.el (kom-display-time): Use lyskom-current-server-time.
	(lyskom-nameday): Ditto.

	* commands2.el (lyskom-list-summary): Ditto.
	(kom-list-marks): Ditto.

	* utilities.el (lyskom-current-client-time): New function.
	(lyskom-client-date): Removed.

	* ansaphone.el (lyskom-ansaphone-record-message): Use
	lyskom-current-client-time.

	* parse.el (lyskom-parse-member-old): Ditto.
	(lyskom-parse-membership-old): Ditto.

	* async.el (lyskom-format-as-personal-message): Ditto.

2001-04-22  Johan Sundström  <jhs@lysator.liu.se>

	* commands1.el (lyskom-get-least-used-mark-types-alist): New
	function.
	(lyskom-allocate-mark-type): Does no longer reuse used non-named
	marks,when possible, and defaults to the least used non-named one
	otherwise.

2001-04-21  Joel Rosdahl  <joel@rosdahl.net>

	* english-strings.el (lyskom-command): Better description of
	kom-delete-conf.

	* swedish-strings.el (lyskom-command): Ditto.

	* option-edit.el (lyskom-widget-string-action): Nicer prompt
	strings.
	(lyskom-widget-number-action): Ditto.

	* swedish-strings.el (lyskom-custom-strings): Nicer prompt
	strings.

	* option-edit.el (lyskom-widget-mark-association-action): Set
	default values.

	* vars.el.in (kom-default-mark): New default value: ask for mark
	type.

	* commands1.el (lyskom-read-mark-type): Offer to allocate new mark
	type automatically.
	(lyskom-allocate-mark-type): New function.
	(lyskom-mark-text): Pass new parameters to lyskom-read-mark-type.

	* english-strings.el (lyskom-message): New strings for automatic
	mark type creation.

	* swedish-strings.el (lyskom-message): Ditto.

	* Makefile ($(TARGET-EL)): Always update build date in vars.el.

2001-04-01  Joel Rosdahl  <joel@rosdahl.net>

	* swedish-strings.el (lyskom-message): Added hint about a second
	unsubscription to passivate-done.

	* english-strings.el (lyskom-message): Ditto.

	* swedish-strings.el (lyskom-custom-strings): Small cosmetic
	fixes.

	* option-edit.el (lyskom-customize-buffer-format): Small cosmetic
	change.

	* view-text.el (lyskom-view-text): Insert symbolic mark type.

	* vars.el.in (kom-symbolic-marks-alist): Added.

	* swedish-strings.el (lyskom-message): Changed mark-related
	strings.
	(lyskom-custom-strings): Added mark-related strings. More
	documentation in kom-default-mark-doc.

	* english-strings.el (lyskom-message): Changed mark-related
	strings.
	(lyskom-custom-strings): Added mark-related strings. More
	documentation in kom-default-mark-doc.

	* option-edit.el (lyskom-customize-buffer-format): Added
	kom-symbolic-marks-alist.
	(lyskom-custom-variables): Ditto.
	(lyskom-widget-functions): Added mark-association.
	(lyskom-mark-association-widget): New function.
	(lyskom-widget-mark-association-action): New function.
	(lyskom-widget-mark-association-match): New function.
	(lyskom-widget-mark-association-validate): New function.
	(lyskom-widget-mark-association-value-create): New function.
	(lyskom-mark-association): New widget.

	* komtypes.el (mark->symbolic-mark-type): New function.

	* commands2.el (kom-list-marks): Insert symbolic mark type.
	(lyskom-print-mark-summary-line): Ditto.
	(lyskom-symbolic-mark-type-string): New function.
	(lyskom-max-mark-width): New function.

	* commands1.el (lyskom-read-mark-type): New function.
	(lyskom-mark-text): Use lyskom-read-mark-type.
	(kom-review-marked-texts): Use lyskom-read-mark-type.
	(lyskom-review-marked-texts): Insert symbolic mark type.

2001-03-31  Ulrik Haugen  <qha@lysator.liu.se>

	* english-strings.el (lyskom-en-mode-map): added binding "r h" for
	kom-review-mail-headers.

	* swedish-strings.el (lyskom-sv-mode-map): added binding "} b" for
	kom-review-mail-headers.
	(): corrected typo.

2001-03-15  Joel Rosdahl  <joel@rosdahl.net>

	* vars.el.in (lyskom-commands): Added kom-add-cross-reference.
	(kom-prompt-for-text-no): Added kom-add-cross-reference.

	* swedish-strings.el (lyskom-message): Added
	text-to-add-cross-reference-to string.
	(lyskom-command): Added kom-add-cross-reference.

	* english-strings.el (lyskom-message): Added
	text-to-add-cross-reference-to string.
	(lyskom-command): Added kom-add-cross-reference.

	* edit-text.el (kom-edit-add-cross-reference): Use
	lyskom-read-cross-reference-and-get-aux-item.

	* commands1.el (kom-add-cross-reference): New function.
	(lyskom-add-cross-reference): New function.
	(lyskom-read-cross-reference-and-get-aux-item): New function.

	* Makefile: Include build date in client version if built from a
	checked-out CVS module.  Somewhat crude, but maybe nice.

	* swedish-strings.el (lyskom-message): Added missing word.
	Different formatting for client statistics lines.

	* english-strings.el (lyskom-en-edit-mode-map): Fixed cut-n-paste
	error.  Different formatting for client statistics lines.

2001-02-25  Joel Rosdahl  <joel@rosdahl.net>

	* Release av 0.46.1.

	* view-text.el (lyskom-view-text): Don't sort remarks when
	reviewing without conversion.

	* swedish-strings.el (lyskom-command): "Anmärkningar" instead of
	"korta repliker".

	* english-strings.el (lyskom-message): "Remarks" instead of
	"fast/quick replies".

	* commands2.el (kom-fast-reply): Updated doc string.

	* Makefile (release-files): Include spec file in release.

	* Makefile: Removed release-cleanup.

	* distribution-README: Note about RPMs.

	* lyskom-elisp-client.spec: Include NEWS-0.46.1.  Better source
	URL.

	* Makefile (clean): Don't remove RPM spec.

2001-02-20  Joel Rosdahl  <joel@rosdahl.net>

	* debian/docs: Added NEWS-0.46.1.

	* english-strings.el (lyskom-message): Reworded
	{author,other}-fast-replies.

	* swedish-strings.el (lyskom-message): Ditto.

	* commands1.el (kom-change-parenthesis): Use name of current user
	as default.

2001-02-03  Joel Rosdahl  <joel@rosdahl.net>

	* lyskom-rest.el (lyskom-update-prompt): Show "read next
	attachment" prompt if next text is an attachment.

	* swedish-strings.el (lyskom-message): Added
	read-next-attachment-prompt.

	* english-strings.el (lyskom-message): Ditto.

	* distribution-README: Various small updates.

2001-01-28  Joel Rosdahl  <joel@rosdahl.net>

	* Release av 0.46.1-BETA-5.

	* english-strings.el (lyskom-en-edit-mode-map): Bind
	kom-button-click-or-yank to different buttons depending on Emacs
	flavour.

	* swedish-strings.el (lyskom-sv-edit-mode-map): Ditto.

	* view-text.el (lyskom-view-text): Show fast replies made by
	author first.

	* english-strings.el: New strings for fast replies.

	* swedish-strings.el: Ditto.

	* aux-items.el (lyskom-print-fast-reply): Removed.

	* aux-items.el: Added recommended-conf and
	allowed-content-type aux items.

	* edit-text.el (lyskom-edit-mode): Fixed typo found by Per
	Starbäck.

2001-01-07  David Byers  <davby@ida.liu.se>

	* swedish-strings.el: Changed useful bindings of button2up to
	button2. Changed useful bindings of button3up to button3. In a fit
	of paranoia bound button2up and button3up in corresponding places
	to kom-mouse-null.

2001-01-18  Joel Rosdahl  <joel@rosdahl.net>

	* view-text.el (lyskom-print-text): Keep viewed text in cache a
	bit longer so that it won't be prefetched a second time.
	(lyskom-view-text): Ditto.

2001-01-02  Ulrik Haugen  <qha@lysator.liu.se>

	* All files changed when I replaced
	(or (eq foo 'a) (eq foo 'b) ...) with (member foo '(a b ...)):
	Replaced member with memq which compares with `eq', and
	substituted lyskom-comment-types-list & c. where apropriate.

	* vars.el.in (lyskom-comment-types-list): Added constant.
	(lyskom-recpt-types-list): Ditto.
	(lyskom-review-types-list): Ditto.

2000-12-31  Ulrik Haugen  <qha@lysator.liu.se>

	* view-text.el (lyskom-view-text): Replaced
	(or (eq foo 'a) (eq foo 'b) ...) with (member foo '(a b ...))
	This means that the comparison will be done by `equal' instead,
	but that shouldn't matter.
	(lyskom-text-read-p): Ditto.
	(lyskom-text-read-at-least-once-p): Ditto.
	(lyskom-mark-as-read): Ditto.

	* utilities.el (lyskom-text-recipients): Ditto.

	* review.el (lyskom-get-texts-by-to): Ditto.
	(kom-review-backward): Ditto.
	(kom-review-clear): Ditto.

	* prefetch.el (lyskom-prefetch-text-all-handler): Ditto.
	(lyskom-prefetch-texttree-handler): Ditto.
	(lyskom-prefetch-texts-handler): Ditto.

	* parse.el (lyskom-parse-bitstring): Ditto.

	* mship-edit.el (lp--format-insert-entry): Ditto except I replaced
	(and (not (eq foo a)) (not (eq foo b)) ...) with
	(not (member foo (list a b))

	* lyskom-rest.el (kom-view-next-new-text): Ditto.
	(kom-view-next-text): Ditto.
	(lyskom-is-read-handler): Ditto.
	(lyskom-get-prioritized-session): Ditto.
	(lyskom-what-to-do): Ditto.

	* lyskom-buttons.el (lyskom-generate-button): Ditto.
	(lyskom-view-url-windows): Ditto.
	(lyskom-view-url-netscape): Ditto.

	* komtypes.el (lyskom-is-recipient): Ditto.

	* filter.el (lyskom-filter-text-p-2): Ditto.

	* filter-edit.el (lyskom-verify-filter-pattern): Ditto.
	(lyskom-format-filter-pattern-insert): Ditto.
	(lyskom-filter-edit-insert-pattern): Ditto.

	* edit-text.el (lyskom-edit-send-check-recipients): Ditto.
	(lyskom-edit-send-check-recipients): Ditto.
	(lyskom-edit-get-commented): Ditto.

	* completing-read.el (lyskom-complete-string): Ditto.

	* commands2.el (kom-list-summary): Ditto.
	(kom-postpone): Ditto.
	(kom-set-personal-label): Ditto.

	* commands1.el (lyskom-get-recipients-from-misc-list): Ditto.
	(lyskom-list-created-conferences-2): Ditto except I replaced
	(or (eq (a) foo) (eq (b) foo) ...) with
	(member foo (list (a) (b) ...))
	(lyskom-jump): Ditto.

	* clienttypes.el (read-list-delete-text): Ditto.

	* buffers.el (lyskom-display-buffer): Ditto.

	* autoconf.el (extract-configuration-option): Ditto.

	* async.el (lyskom-async-new-text): Ditto.
	(lyskom-async-deleted-text): Ditto.

	* swedish-strings.el (lyskom-sv-mode-map): Made "<delete>" scroll
	up as well as the other delete-keys.

	* english-strings.el (lyskom-en-mode-map): Ditto.

2000-12-22  David Byers  <davby@ida.liu.se>

	* lyskom-rest.el (kom-page-next-command): Added (temporary)
	workaround for emacs-21.0.94.
	(kom-view): Same here.

2000-12-15  David Byers  <davby@ida.liu.se>

	* buffers.el (lyskom-display-buffer): Fixed problem with
	displaying windows in iconified frames. This could cause Emacs to
	lock up. Maybe.

2000-12-12  David Byers  <davby@ida.liu.se>

	* commands1.el (kom-move-text): Default recipient of kom-move-text
	is finally correct.

2000-12-29  Ulrik Haugen  <qha@lysator.liu.se>

	* lyskom-rest.el (j-or-n-p lyskom-j-or-n-p): Removed the parameter
	quittable and rewrote the functions as if it were always
	t. Callers changed (in aux-items.el, commands1.el, commands2.el,
	edit-text.el, filter-edit.el and startup.el).

2000-12-17  Ulrik Haugen  <qha@lysator.liu.se>

	* utilities.el: applied patch from Per Starbäck, device-class
	isn't defined if it doesn't exist, lyskom-device-class is. Caller
	changed. (See text 5867166 in LysLysKOM.)

2000-12-12  David Byers  <davby@sen5.ida.liu.se>

	* Release av 0.46.1-BETA-4

2000-12-12  David Byers  <davby@ida.liu.se>

	* commands2.el (kom-modeline-next-unread-kom): Don't check for
	Emacs version.
	(kom-modeline-select-unread-kom): Don't check for Emacs version.

	* lyskom-rest.el (lyskom-is-loaded): Set modeline keymap for
	lyskom-unread-mode-line in Gnu Emacs too.

2000-12-09  Joel Rosdahl  <joel@rosdahl.net>

	* commands2.el (kom-status-conf): More space allocated for the
	"Unread" column.
	(kom-status-person): Ditto.

	* english-strings.el (lyskom-message): Ditto.

	* swedish-strings.el (lyskom-message): Ditto.

2000-12-06  Joel Rosdahl  <joel@rosdahl.net>

	* edit-text.el (lyskom-edit-send-check-recipients): Ask if normal
	recipient or carbon copy recipient should be added.

	* distribution-configure.in: Ignore stderr output from Emacs.

	* autoconf.el (extract-autoconf-data): Print autoconf data to
	stdout.

2000-12-03  Per Cederqvist  <ceder@moria>

	* macros.el (blocking-do-multiple): Fixed typo in docstring.

	* english-strings.el (kom-ispell-dictionary): Set the value for
	"en", not "sv".
	(kom-tell-phrases): Likewise.

2000-12-02  Per Cederqvist  <ceder@moria>

	Enable colors on tty devices under Emacs 21.
	* utilities.el (device-class): Provide a better version if 
	display-color-p exists.

	* compatibility.el (window-list): Removed. This was no longer used.

2000-11-30  David Byers  <davby@ida.liu.se>

	* commands1.el (lyskom-make-re-case-insensitive): Eliminate use of
	split-string since it doesn't exist in all Emacsen (and fails in
	XEmacs).

2000-11-29  David Byers  <davby@sen5.ida.liu.se>

	* Release av 0.46.1-BETA-3

2000-11-27  Joel Rosdahl  <joel@rosdahl.net>

	* debian/control (Depends): Saner dependency default.

2000-11-23  David Byers  <davby@ida.liu.se>

	* filter.el (kom-super-jump): Check for empty subject by matching
	subject againts regexp, not regexp against subject (which would be
	plain wrong).

2000-11-19  Joel Rosdahl  <joel@rosdahl.net>

	* vars.el.in (kom-dont-check-commented-authors): Added inherit
	property.

2000-11-19  Per Starbäck (commit by Per Cederqvist  <ceder@moria>)

	* buffers.el (lyskom-undisplay-buffer): Don't use window-list,
	since it takes different arguments under Emacs 21 and other
	emacsen.

2000-11-18  Joel Rosdahl  <joel@rosdahl.net>

	* lyskom-elisp-client.spec: Changed file names in %install
	section.

	* commands1.el (kom-change-parenthesis): Handle multiple
	parentheses and paranthesis not located at the end.

	* vars.el.in (kom-server-aliases): kom.hem.liu.se instead of
	rydkom.rydnet.lysator.liu.se.

	* command.el (lyskom-read-extended-command): Revived the
	minibuffer completion code from 0.46-BETA-P.
	(lyskom-ok-command): Ditto.

2000-11-18  Per Starbäck (commit by Per Cederqvist  <ceder@moria>)

	* commands2.el (kom-status-person): Use mod instead of %, since
	floating point numbers can result from string-to-number in Emacs
	21.

2000-10-05  David Byers  <davby@ida.liu.se>

	* lyskom-rest.el (lyskom-sentinel): Use dead-ok argument to
	lyskom-start-of-command.

	* command.el (lyskom-start-of-command): Added dead-ok argument.

2000-09-22  David Byers  <davby@sen2.ida.liu.se>

	* commands1.el (lyskom-go-to-empty-conf): Check
	lyskom-is-anonymous.

2000-10-01  Per Cederqvist  <ceder@moria>

	* commands1.el (lyskom-make-re-case-insensitive): New function.
	(kom-list-re): Be case insensitive if a prefix arg is given.
	* vars.el.in (lyskom-char-classes): New variable.
	* utilities.el (lyskom-default-collate-table): Doc-string
	improved.  Value fixed.
	(lyskom-compute-char-classes): New function.
	* startup.el (lyskom): Set lyskom-char-classes.
	* lyskom-rest.el: Set a default value for lyskom-char-classes.

2000-09-15  David Byers  <davby@ida.liu.se>

	* command.el (lyskom-command-complete-word): Prevent multiple
	spaces at end of a word (you'd get them when you typed a full word
	and then a space).
	(lyskom-read-extended-command): Bind last-exact-completion for
	XEmacs compatibility.
	(last-exact-completion): New variable.

2000-09-14  David Byers  <davby@sen2.ida.liu.se>

	* Release av 0.46.1-BETA-2

	* english-strings.el: We tried to bind things in the *swedish*
	keymaps. Bad idea. Fixed.

2000-09-13  David Byers  <davby@sen2.ida.liu.se>

	* english-strings.el: Bind C-c C-y in edit mode. Bind keys in
	lyskom-en-customize-map (used to say lyskom-sv-customize-map). 

2000-09-14  Joel Rosdahl  <joel@lysator.liu.se>

	* vars.el.in: Proof-read variable descriptions.

2000-09-09  David Byers  <davby@sen2.ida.liu.se>

	Fix problems with slow commands:
	* slow.el (lyskom-expand-slow-command): Return the command when
	there is an exact match.
	(kom-parse-command-and-execute): Use lyskom-expand-slow-command
	instead of kom-expand-slow-command.

	* Release av 0.46.1-BETA-1

	* swedish-strings.el: Changed ".)" to ")." where appropriate.

	* english-strings.el: Changed ".)" to ")." where appropriate.

	* buffers.el (lyskom-buffer-kill-trim-hook): New function. Add
	call to lyskom-ignore to avoid warnings about unused variables.
	(kill-buffer-hook): Add lyskom-buffer-kill-trim-hook instead of
	anonymous lambda. Add to the global value since the local value of
	the hook is undefined at load time.

	Compatibility definition lyskom-read-from-minibuffer:
	* option-edit.el (lyskom-widget-string-action): Use
	lyskom-read-from-minibuffer.

	* filter.el (kom-filter-subject): Use lyskom-read-from-minibuffer.
	(kom-filter-text): Use lyskom-read-from-minibuffer.

	* filter-edit.el (lyskom-filter-edit-insert-pattern): Use
	lyskom-read-from-minibuffer.

	* edit-text.el (kom-edit-insert-text): Use
	lyskom-read-from-minibuffer.

	* commands2.el (kom-calculate): Use lyskom-read-from-minibuffer.
	(kom-set-personal-label): Same here.
	(kom-set-personal-label): Same here.

	* ansaphone.el (kom-change-auto-reply): Use
	lyskom-read-from-minibuffer.

	Start to fix command completion:
	* command.el (lyskom-read-extended-command): Roll our own
	completing-read by emulating the standard behavior.

	* compatibility.el (lyskom-read-from-minibuffer): New
	compatibility definition.

	* command.el (lyskom-completing-strip-command): Replace parens
	with empty string, not space.
	(lyskom-command-match-string-regexp): Allow initial space. 

2000-09-05  David Byers  <davby@sen2.ida.liu.se>

	* commands1.el (kom-change-priority): Bind
	kom-membership-default-priority to nil to force
	lyskom-try-add-member to ask.
	(kom-change-priority): Don't break when user is not a member of
	the conference. Useful error message when conference does not
	exist.

2000-09-03  David Byers  <davby@sen2.ida.liu.se>

	* command.el (lyskom-update-command-completion): Save unicased
	version of string.
	(lyskom-complete-command): Fix updating of exact.

2000-09-05  Joel Rosdahl  <joel@lysator.liu.se>

	* distribution-README: Information about the Debian package.

2000-09-05  Joel Rosdahl  <joel@lysator.liu.se>

	* english-strings.el: Proof-read (to the best of my ability...).
	Removed misspelled key.

	* swedish-strings.el: Corrected spelling.  Fixed inconsistency.
	Removed misspelled key.

2000-09-03  Ulrik Haugen  <qha@lysator.liu.se>

	* buffers.el (kill-buffer-hook): Moved the adding to kill-buffer-hook
	here and added a check for the major-moded; this should keep it from
	affecting all buffers.

	* english-strings.el (lyskom-custom-strings): Fixed a spelling error.

2000-09-02  Ulrik Haugen  <qha@lysator.liu.se>

	* startup.el (lyskom-mode): kill-buffer-hook runs the
	lyskom-trim-buffer-hook on the whole buffer.

2000-09-02  David Byers  <davby@sen2.ida.liu.se>

	* Release av 0.46

2000-09-02  David Byers  <davby@ida.liu.se>

	* Makefile (release-files): Build zip file too.

	* command.el (lyskom-command-match-string-regexp): New function.
	(lyskom-completing-strip-command): New function.
	(lyskom-complete-command): Record exact matches when iterating
	through alternatives. Fix lyskom-lookup to return the exact match,
	not just the first possible match.

	* distribution-Makefile (INFODIR): Changed to default location for
	Emacs installations.
	(LISPDIR): Same here.

	* slow.el (lyskom-expand-slow-command): Use
 	lyskom-slow-list-completions to sort possible completions.
	(lyskom-slow-list-completions): New function.
	(kom-slow-list-completions): Use lyskom-slow-list-completions.

	* compatibility.el (char-before): New compatibility definition.

	* utilities.el (lyskom-maybe-frob-completion-table): Add third
	argument to lyskom-recode-string.

	* lyskom-buttons.el (lyskom-make-button-menu): Add third argument
	to lyskom-recode-string.

2000-09-01  David Byers  <davby@sen2.ida.liu.se>

	* slow.el (kom-slow-click-or-yank): Fixed typo.

	* Release of 0.46-BETA-W

2000-09-01  David Byers  <davby@ida.liu.se>

	
	Selective checking of commented author's membership:
	* edit-text.el (lyskom-edit-send-check-recipients): Use
	kom-dont-check-commented-authors. 

	* vars.el.in (kom-dont-check-commented-authors): New variable.

	Better command completion:
	* command.el (lyskom-complete-command): Fix. We didn't handle
	check for exact match properly. Fix unibyte incompatibility.
	(lyskom-read-extended-command): Use lyskom-complete-command.
	(lyskom-ok-command): Work the elements from
	lyskom-command-alternatives.

	* vars.el.in (lyskom-command-alternatives): Made a minibuffer
	variable.
	(lyskom-is-administrator): Same here.

	* command.el (lyskom-ok-command): Rewrote to work with new
	completion thingy.

	Buttons and menus in slow mode:
	* slow.el (kom-expand-slow-command-or-next-link): New command.
	(kom-slow-click-or-yank): New command.
	(kom-slow-button-press): New command.
	(kom-slow-menu-button-press): New command.
	(kom-expand-slow-command-or-next-link): New command.
	(lyskom-slow-on-prompt-line): New function.

2000-08-31  David Byers  <davby@ida.liu.se>

	* slow.el (kom-slow-start-of-line): Do the right thing when not on
	the last line of the buffer.

2000-08-31  Ulrik Haugen  <qha@lysator.liu.se>

	* lyskom-rest.el (lyskom-trim-buffer): Saves point and mark and
	resets point, mark and lyskom-last-viewed after taking into
	consideration lyskom-trim-buffer-delete-to.
	(lyskom-trim-buffer): Except point and mark doesn't need this
	treatment.

Thu Aug 31 14:38:34 2000  David Byers  <davby@sen2.ida.liu.se>

	* Release av 0.46-BETA-Q

2000-08-31  David Byers  <davby@ida.liu.se>

	* option-edit.el (lyskom-customize-buffer-format): Moved
	lyskom-trim-buffer-minimum to a better position.

	* english-strings.el, swedish-strings.el: Fixed some minor rookie
	mistakes made by Ulrik.

	* completing-read.el (lyskom-completing-match-string-regexp):
	Moved to avoid compiler warnings and to make inlining work.
	(lyskom-completing-match-string): Ditto.

	* Makefile (SOURCES): Moved completing-read up to avoid warnings.

2000-08-30  David Byers  <davby@ida.liu.se>

	* lyskom-rest.el (lyskom-update-prompt): Don't fsck up the command
	the user is currently entering at the prompt when in slow mode.

	* vars.el.in (lyskom-command-alternatives): New variable.

	* slow.el (kom-slow-list-completions): New command.

	* swedish-strings.el (lyskom-command): Renamed "Återstarta kom" so
	that "Återse" would be easier to complete when using slow
	commands.

	* language.el (lyskom-set-language): Call
	lyskom-update-command-completion. 

	* lyskom-rest.el (lyskom-is-loaded): Set the default value of
	lyskom-collate-table so that lyskom-unicase works even before we
	connect to the server.

	* utilities.el (lyskom-unicase): Don't attempt to switch to lyskom
	buffer if there is none.

	* command.el (lyskom-update-command-completion): New function.
	(lyskom-lookup-command-by-name): New function.
	(lyskom-complete-command): New function.

	* completing-read.el (lyskom-completing-match-string-regexp): New
	function.
	(lyskom-completing-match-string): Use it.
	
2000-08-30  Ulrik Haugen  <qha@lysator.liu.se>

	* english-strings.el (lyskom-custom-strings)
	(lyskom-custom-strings): Added
	lyskom-trim-buffer-minimum.

	* swedish-strings.el (lyskom-custom-strings)
	(lyskom-custom-strings): Added
	lyskom-trim-buffer-minimum.

	* vars.el.in (kom-trim-buffer-minimum): Added this variable.

	* option-edit.el (lyskom-customize-buffer-format)
	(lyskom-custom-variables): Added lyskom-trim-buffer-minimum.

	* lyskom-rest.el (lyskom-trim-buffer): lyskom-trim-buffer-hook is only
	run when there's kom-trim-buffer-minumum bytes or more to remove.

2000-08-30  David Byers  <davby@ida.liu.se>

	* utilities.el (lyskom-maybe-frob-completion-table): Added missing
	table argument.

2000-08-29  Joel Rosdahl  <joel@lysator.liu.se>

	* Makefile (debian-build): Use new Makefile target.

	* debian/rules (binary-indep): Use new Makefile target.

2000-08-29  David Byers  <davby@sen2.ida.liu.se>

	* Release av 0.46-BETA-P

2000-08-29  David Byers  <davby@ida.liu.se>

	* check-strings.el: Support strings and user variables declared as
	missing to eliminate spurious warnings. Support expected ending
	mismatches.

	* language.el (lyskom-language-missing-string-internal): New
	function. 
	(lyskom-language-missing-string): New macro.

	* startup.el (kom-start-anew): Print e-mail address for server
	admin if user does not enter the correct password.

2000-08-29  David Byers  <davby@sen2.ida.liu.se>

	Correct multibytedness of buffer names:
	* buffers.el (lyskom-recode-buffer-name): New function.
	(lyskom-generate-new-buffer): Use it instead of
	lyskom-maybe-recode-string.
	(lyskom-get-buffer-create): Same here.

2000-08-29  David Byers  <davby@ida.liu.se>

	* edit-text.el (lyskom-edit-add-recipient/copy): Obey
	kom-confirm-add-recipients.

	Fix question whether to add cc-recipient:
	* commands1.el (lyskom-add-helper): Inline check for cc-recipient.
	Removed call to lyskom-last-added-rcpt.
	(lyskom-verify-add-recipient): Removed.

	* vars.el.in (kom-confirm-add-recipients): New variable.
	(lyskom-add-recipient-hook): Removed.

	Fix defaults for sub and move recipients:
	* commands1.el (kom-sub-recipient): Use lyskom-last-sub-recipient
	if it is one of the recipients. If a default recipient does not
	exist, try the next.
	(lyskom-default-recpt-for-sub): New function.
	(kom-sub-recipient): Use lyskom-default-recpt-for-sub.

	* vars.el.in (lyskom-last-added-rcpt): Made local.
	(lyskom-last-added-ccrcpt): Ditto.
	(lyskom-last-added-bccrcpt): Ditto.
	(lyskom-last-sub-rcpt): New variable.

	Bugfix for status session:
	* commands1.el (lyskom-deferred-client-1): Work even when
	defer-info data is just the session number.
	(lyskom-deferred-client-2): Handle case when there is no
	collector. 

2000-08-28  David Byers  <davby@ida.liu.se>

	Make nearly all hooks local:
	* vars.el.in (kom-quit-hook): Declare as server-hook.
	(lyskom-view-text-hook): Declare as local-hook.
	(lyskom-send-message-hook): Ditto.
	(lyskom-login-hook): Ditto.
	(lyskom-change-conf-hook): Ditto.
	(lyskom-send-text-hook): Ditto.
	(lyskom-send-message-exit-hook): Ditto.
	(lyskom-personal-message-hook): Ditto.

	Summary statistics at end of list:
	* commands1.el (lyskom-list-clients-statistics-2): New function.
	(lyskom-list-clients-statistics-1): New function.
	(lyskom-list-clients-collect): New function.
	(lyskom-deferred-client-2): Collect client statistics.
	(kom-list-clients): Collect client statistics. Print client
	statistics.

	Improve FAQ handling:
	* vars.el.in (lyskom-commands): Added kom-change-conf-faq.

	* commands1.el (lyskom-change-conf-faq-2): New function.
	(lyskom-change-conf-faq): New function.
	(kom-change-conf-faq): New command.

	* commands2.el (kom-del-faq): If there is only one FAQ, assume
	that is the one to delete.

Fri Aug 25 22:12:16 2000  David Byers  <davby@sen2.ida.liu.se>

	Correct definition of mday in lyskom-client-date:
	* async.el (lyskom-format-as-personal-message): Assume correct
 	value of mday.

	* utilities.el (lyskom-client-date): Correct setting of mday.

2000-08-23  David Byers  <davby@ida.liu.se>

	* talkback.el (lyskom-insert-bug-report): Added command-line-args
	to output.

2000-08-23  David Byers  <davby@sen2.ida.liu.se>

	* Release of 0.46-BETA-O

2000-08-23  David Byers  <davby@ida.liu.se>

	* commands2.el (lyskom-stop-keep-alive): Use disable-timeout for
	XEmacs 20.4 compatibility.
	(lyskom-keep-alive): Use add-timeout for XEmacs 20.4
	compatibility.

	Get rid of compiler warnings:
	* utilities.el (functionp): Use lyskom-compiled-function-p, not
	byte-code-function-p to eliminate a warning.
	(lyskom-compiled-function-p): Define depending on Emacs version to
	avoid using function marked as obsolete in XEmacs but not in Emacs
	and vice versa (compiled-function-p vs byte-code-function-p).
	
	* lyskom-buttons.el (kom-mouse-null): Added call to identity to
	get rid of compiler warning in Gnu Emacs 20.2.

	* lyskom-rest.el (lyskom-is-loaded): defvar
	frame-icon-title-format to avoid compiler warnings.

	* compatibility.el (strikethrough): Define face strikethrough
	here. The type of definition is set at compile time.

	* utilities.el (lyskom-setup-faces): Move creation of face
	strikethrough to compatibility.el.

2000-08-22  David Byers  <davby@ida.liu.se>

	Get rid of compiler warnings:
	* compatibility.el (lyskom-encode-coding-char): Test emacs version
	at compile time to get rid of some warnings. Downside is that we
	need to run in the same version (more or less) that we compiled
	in.

	Get completing-read to work in unibyte MULE emacsen:
	* startup.el (lyskom-read-server-name): Use
	lyskom-completing-read.

	* remote-control.el (kom-remote-autoreply): Use
	lyskom-completing-read.

	* lyskom-buttons.el (lyskom-keyboard-menu): Use
	lyskom-completing-read. Recove completion table as necessary.

	* filter.el (lyskom-filter-read-action): Use
	lyskom-completing-read.

	* filter-edit.el (lyskom-filter-edit-insert-entry): Use
	lyskom-completing-read.
	(lyskom-filter-edit-insert-pattern): Use lyskom-completing-read.

	* edit-text.el (kom-edit-add-cross-reference): Use
	lyskom-completing-read.

	* completing-read.el (lyskom-read-session-resolve-ambiguity): Use
	lyskom-completing-read.

	* command.el (lyskom-read-extended-command): Use
	lyskom-completing-read. 

	* commands2.el (kom-change-language): Use lyskom-completing-read.
	(kom-del-faq): Use lyskom-completing-read.
	
	* utilities.el (lyskom-default-collate-table): Rewrote the string
	so it can be safely encoded in iso-8859-1 so that Gnu Emacs will
	not attempt to save it in emacs-mule encoding, which would fuck it
	up completely.

	* startup.el (lyskom-read-server-name): Recode completion table as
	necessary.

	* remote-control.el (kom-remote-autoreply): Recode completion
	table as necessary.

	* commands2.el (kom-del-faq): Recode completion table as
	necessary.

	* completing-read.el (lyskom-read-session-resolve-ambiguity):
	Recode completion table as necessary.

	* filter-edit.el (lyskom-filter-edit-insert-entry): Recode
	completion tables as necessary.
	(lyskom-filter-read-action): Recode completion table as necessary.


	* commands2.el (kom-change-language): Recode completion table as
	necessary.

	* command.el (lyskom-read-extended-command): Recode completion
	table as necessary.
	
	* utilities.el (lyskom-maybe-frob-completion-table): New function
	to recode completion tables for completing-read according to the
	state of enable-multibyte-characters.

2000-08-22  David Byers  <davby@ida.liu.se>

	* completing-read.el (lyskom-completing-match-string): Quote
	string to be used as regexp.

	* commands1.el (kom-list-created-conferences): Re-signal caught
	quit signal.

2000-08-21  David Byers  <davby@ida.liu.se>

	* buffers.el (lyskom-traverse-buffer-hierarchy): Test liveness of
	current buffer, not root buffer (doh!).

2000-08-21  David Byers  <davby@sen2.ida.liu.se>

	* Release av 0.46-BETA-N

2000-08-21  David Byers  <davby@ida.liu.se>

	* Reworked some MULE details. Hopefully things will work better in
	unibyte mode now.

	* lyskom-buttons.el (lyskom-make-button-menu): Use
	lyskom-maybe-recode-string, not encode-coding-string.

	* vars.el.in (lyskom-mule-compiled): Redefined to catch multibyte
	strings in multibyte-capable but disabled Emacsen (i.e. all Gnu
	Emacs).

	* compatibility.el: Never set coding system of server process to
	raw-text. 

	* buffers.el (lyskom-fix-buffer-name): Removed.

	* utilities.el (lyskom-maybe-recode-string): Test agains
	multibyte-string-p not enable-multibyte-characters since we may
	have multibyte strings in a unibyte environment.

	* vars.el.in (lyskom-button-actions): Fixed typo.
	(lyskom-text-buttons): Fixed email regexp to combat very slow
	matching of long words.

2000-08-17  David Byers  <davby@ida.liu.se>

	Reimplement kom-bug-report:
	* talkback.el: New file.
	(kom-bug-report): I'm baaaack!

	Misc fixes:
	* swedish-strings.el (lyskom-command): Lista organisatörsskap
	changed to Lista ägda möten.
	(lyskom-custom-strings): Fixed typo.

	* commands1.el (kom-list-created-conferences): Ugly hack to fix
	cursor positioning problem. Something is badly broken here.

	* lyskom-rest.el (lyskom-is-loaded): Encode frame title string to
	latin1.

	* vars.el.in (lyskom-mule-compiled): New variable.

	* commands2.el (kom-who-am-i): Print MULE indicator for Emacs and
	client.

2000-08-16  Kent Engström  <kent@ceres.unit.liu.se>

	* Makefile, lyskom-elisp-client.spec: Support for building RPMS.

2000-08-16  David Byers  <davby@ida.liu.se>

	* commands1.el (lyskom-list-created-conferences-2): sit-for to
	update display. Superconf flag is only shown if the conference
	does not accept comments.
	(kom-list-created-conferences): Print header for the list.

Wed Aug 16 16:55:56 2000  David Byers  <davby@sen2.ida.liu.se>

	* Release av 0.46-BETA-M

2000-08-16  David Byers  <davby@ida.liu.se>

	* commands1.el (lyskom-list-created-conferences-2): Show if
	conference is secret or protected.

	* swedish-strings.el (lyskom-message): Skyddat->Hemligt.

	* commands1.el (kom-add-recipient): Rewrote.
	(kom-add-copy): Rewrote.
	(kom-add-bcc): Rewrote.
	(lyskom-verify-add-recipient): Rewrote.
	(lyskom-add-helper): New function.
	(kom-sub-recipient): Rewrote. Only allow completion of actual
	recipients. 
	(kom-move-text): Rewrote. Only complete actual recipients.
	(lyskom-move-recipient): New function replaces
	lyskom-add-sub-recipients. Better error messages.

	* vars.el.in (lyskom-add-recipient-hook): New variable.
	(lyskom-add-sub-recipients-hook): Removed.
	

	* completing-read.el (lyskom-read-conf-internal-verify-type):
	Added restrict predicate.
	(lyskom-read-conf-internal): Changed x-list to candidate-list
	since x-list is probably not the right thing to look at.
	Implement more efficient matching if the restrict predicate is
	used. Get persons or conferences only as needed according to the
	predicate.
	(lyskom-completing-lookup-z-name): want-pers and want-conf were
	swapped in call to lookup-z-name (and it didn't matter since we
	always called it with both set to 1).

	* utilities.el (lyskom-text-recipients): New function.

2000-08-15  David Byers  <davby@ida.liu.se>

	* async.el (lyskom-is-in-minibuffer): Check cursor-in-echo-area.

	* lyskom-rest.el (j-or-n-p): Inhibit minibuffer messages.

	* commands2.el (kom-set-unread): Immediately go to
	lyskom-current-conf if that is the conf being changed.

	* prefetch.el (lyskom-fetch-start-of-map): Fix off-by-one error in
	map fetching.

	* commands2.el (kom-set-unread): Use lyskom-fetch-start-of-map to
	block until we see a text in the map of the conference we are
	setting unread in.

	* commands1.el (lyskom-add-member-answer): Block until we get at
	least one text in the map or have read the entire map.
	(lyskom-add-membership): Add parameter BLOCKING to allow blocking
	until we have read at least one text in the map.

	* prefetch.el (lyskom-fetch-start-of-map): New function.

	* lyskom-rest.el (lyskom-check-go-to-conf): Start prefetch when
	converting passive membership to active membership.

2000-08-14  David Byers  <davby@ida.liu.se>

	* services.el (lyskom-server-call): Return the ref-no of the call
	just made.

	* commands1.el (kom-list-created-conferences): Attempt to cancel
	calls still in the pipe before quitting.

	* services.el (lyskom-cancel-call): New function.

	* clienttypes.el (lyskom-queue-set-data): New function.

	* compatibility.el (nil): Set lyskom-server-coding-system
	according to the value of enable-multibyte-characters in Gnu Emacs
	to make stuff work better in multibyte-disabled Gnu Emacsen.

	* commands1.el (kom-list-conferences): Wait for membership to be
	read.
	(kom-list-created-conferences): Wait for membership to be read.
	(lyskom-list-conf-membership-char): New function to print
	membership char in name lists.
	(lyskom-list-created-conferences-2): Use it.
	(lyskom-list-conf-print): Use it.
	(kom-list-created-conferences): Make it possible to quit with C-g.

Fri Aug 11 17:34:39 2000  David Byers  <davby@sen2.ida.liu.se>

	* Release av 0.46-BETA-L

2000-08-11  David Byers  <davby@ida.liu.se>

	* option-edit.el (lyskom-file-widget): Fixed bug so that help
	button appears on the same line as the file name.

	* edit-text.el (lyskom-edit-parse-headers): Skip comments in
	headers.
	(lyskom-edit-replace-headers): Anchor search for header separator.
	(lyskom-edit-fcc-text): New function to save text almost as if it
	were printed properly to a log file.
	(lyskom-edit-parse-headers): Items in the header can be commented
	out by prepending a "#". This may be useful if we ever want to put
	temporary information into the header lines. Maybe.

	* lyskom-rest.el (kom-save-text): Factor out saving code to
	lyskom-save-text. Use lyskom-save-text. Added FILENAME parameter.
	(lyskom-save-text): New function.

	* edit-text.el (lyskom-create-text-handler): It appeared that
	the edit buffer for anonymously created texts was never deleted
	and the successful creation never recorded. Fixed. Save created
	text if kom-created-texts-are-saved is non-nil.
	(lyskom-edit-send): Call lyskom-create-text-hook. 

	* vars.el.in (lyskom-new-text-hook): Fixed doc-string (no-message
	does not exist). Don't save in server per default. Do not list as
	a user variable (anyone who needs to use this hook should be smart
	enough to find it anyway).
	(kom-created-texts-are-saved): New variable.
	(lyskom-button-actions): Added save text body to context menu for
	texts.
	(lyskom-deleted-text-hook): Same here.
	(lyskom-new-recipient-hook): Same here.
	(lyskom-create-text-hook): New variable.

	* lyskom-buttons.el (lyskom-button-save-text-body): New function.

2000-08-10  David Byers  <davby@ida.liu.se>

	* commands1.el (kom-list-created-conferences): New command.
	(lyskom-list-created-conferences-2): New function.

	Kill da bottlenecks:
	* parse.el (lyskom-parse-raw-string): Get rid of call to
	lyskom-string-to-parse.

	Improve list names:
	* commands1.el (kom-list-conferences): Use lookup-z-name instead
	of lookup-name.
	(lyskom-list-conf-print): Show passive memberships as "-" in the
	result list. Use conf-z-infos instead of conf-nos. Better error
	messages.
	(kom-list-re): Send conf-z-infos to lyskom-format to speed things
	up a bit. Better error messages.
	(kom-list-persons): Use lookup-z-name instead of lookup-name.
	Better error messages.
	(lyskom-list-pers-print): Use conf-z-infos instead of conf-nos to
	speed things up a bit. 

	* lyskom-rest.el (lyskom-format-aux-help): Allow conf-z-info as
	argument to lyskom-format letters M, P, m, p.
	(lyskom-current-error): New function.
	
	Cleanup of easy TODO items:
	* aux-items.el (lyskom-print-creating-software): Print creating
	software when current command is kom-review-noconversion.

	Fix review many to conferences with few texts:
	* review.el (lyskom-get-letters-to): Protect nthcdr from negative
	arguments. 
	(lyskom-get-texts-by-and-to): Ditto.
	(lyskom-get-texts-by-generic): Ditto.
	(lyskom-get-texts-to): Ditto.

	Fix kom-super-jump on empty subject:
	* filter.el (kom-super-jump): Protect empty subject with ^$.

2000-08-01  David Byers  <davby@ida.liu.se>

	Menus were sometimes very wide:
	* lyskom-buttons.el (lyskom-make-button-menu): Truncate menu title
	to 43 characters.

2000-07-30  Johan Sundström  <jhs@lysator.liu.se>

	* lyskom-rest.el (lyskom-trim-buffer): Point no longer flickers
	when trimming the buffer.
	(lyskom-trim-buffer-hook): New hook; run before the trimming.
	(lyskom-trim-buffer-delete-to): New variable; how far the buffer
	will be trimmed, useful in lyskom-trim-buffer-hook functions.
	(lyskom-garb-lyskom-buffer-to-file): Fairly ugly hack for flowing
	the trimmed portion of the lyskom buffer into a file. Ought to use
	some configurable variable for the filename.

	* commands2.el (kom-next-unread-kom): More info, as suggested by
	Hans Persson. Tells whether there are any other sessions
	whatsoever when there are no other sessions with unread texts.

2000-07-28  Johan Sundström  <jhs@lysator.liu.se>

	* utilities.el (lyskom-read-text-no-prefix-arg): Policy change;
	prefix argument zero means text under point. Empty (C-u) prefix
	argument now prompts for a text number. This influence compliments
	of Ulrik Haugen. :-)

Fri Jul 28 14:15:12 2000  David Byers  <davby@sen2.ida.liu.se>

	* Release av 0.46-BETA-K

2000-07-28  David Byers  <davby@ida.liu.se>

	* vars.el.in (lyskom-prefetch-conf-tresh): Not really a user
	variable. Don't save in server.
	(lyskom-prefetch-confs): Not really a user variable. Don't save in
	server.
	(lyskom-fetch-map-nos): Not really a user variable. Don't save in
	server. 

	* completing-read.el (lyskom-read-conf-lookup-specials): Return
	conf-z-info, not uconf-stat.

2000-07-27  David Byers  <davby@ida.liu.se>

	* lyskom-buttons.el: Go to point-max in relevant button actions.

2000-07-25  David Byers  <davby@ida.liu.se>

	* lyskom-buttons.el (lyskom-keyboard-menu): Couldn't handle
	symbols for menu items in lyskom-button-actions. Fixed.

2000-07-17  David Byers  <davby@ida.liu.se>

	* vars.el.in (lyskom-add-sub-recipients-hook): Renamed function
	specified in default hook.
	(lyskom-add-sub-recipients-hook): Made local-hook.

	* lyskom-buttons.el (lyskom-button-open-url): Don't go to end of
	buffer when viewing an URL.

2000-07-05  David Byers  <davby@ida.liu.se>

	* vars.el.in (lyskom-button-actions): Moved definition of
	lyskom-button-actions here. Removed all constant strings. Fixed
	the title string symbols.

	* english-strings.el (lyskom-message): Added lyskom-button-action
	strings.

	* swedish-strings.el (lyskom-message): Added lyskom-button-action
	strings.

2000-07-03  David Byers  <davby@ida.liu.se>

	* swedish-strings.el (lyskom-button-actions): Added button type
	func.

	* vars.el.in (lyskom-text-buttons): Fixed problem with info-node
	regexp: it had the space after the colon in the nodename and did
	not allow stuff like ``(file.info)nodename''. 

2000-06-13  David Byers  <davby@ida.liu.se>

	* lyskom-rest.el (forward-text): Go to point-max if after the last
	text.
	(backward-text): Go to point-min if before the first text.

	* utilities.el (lyskom-next-area): Added parameter goto-point-max.
	(lyskom-prev-area): Added parameter goto-point-min.

2000-06-06  David Byers  <davby@ida.liu.se>

	* vars.el.in (kom-ispell-dictionary): Make inherited.

 	Prefetch messes up attachment display:
	* prefetch.el (lyskom-prefetch-text-stat-all): New function.

	* view-text.el (lyskom-skip-attachments): Mark skipped attachments
	as read.

 	Check for bad calls to zerop:
	* review.el (lyskom-review-by-to): Protect zerop check on
	lyskom-current-conf by checking if it is nil first.

	* commands2.el (kom-set-unread): Protect zerop check on
	lyskom-current-conf by checking if it is nil first.

	* commands1.el (kom-sub-self): Protect zerop check on
	lyskom-current-conf by checking if it is nil first.
	(kom-write-text): Same here.

	* async.el (lyskom-parse-async): Cleanup not->null.

2000-06-14  Joel Rosdahl  <joel@lysator.liu.se>

	* review.el (lyskom-review-comments): Review texts in correct
	order.

2000-06-11  Johan Sundström  <jhs@lysator.liu.se>

	* commands2.el (kom-is-person-member-of-conference): Replaced
	redundant check code with a call to lyskom-is-member.

2000-06-11  Joel Rosdahl  <joel@lysator.liu.se>

	* swedish-strings.el: Spelling updates.

2000-06-11  Johan Sundström  <jhs@lysator.liu.se>

	* utilities.el (lyskom-read-text-no-prefix-arg): A zero prefix
	argument now means "always ask for the argument" -- just as it
	said it did in the NEWS file! Good idea; let's implement it! :-)

2000-06-11  Joel Rosdahl  <joel@lysator.liu.se>

	* view-text.el (lyskom-follow-comments): Documentation update.
	Only review texts that can be read.

	* review.el (lyskom-review-comments): Only review texts that can
	be read.

2000-06-10  Johan Sundström  <jhs@lysator.liu.se>

	* vars.el.in (lyskom-add-sub-recipients-hook): New hook.

	* commands1.el (lyskom-add-recipient): New macro.
	(kom-add-recipient): Standard prefix-arguments. Uses above macro.
	(lyskom-sub-recipient): New macro.
	(kom-sub-recipient): Standard prefix-arguments. Uses above macro.
	(lyskom-add-copy): New macro.
	(kom-add-copy): Standard prefix-arguments. Uses above macro.
	(lyskom-add-bcc): New macro.
	(kom-add-bcc): Standard prefix-arguments. Uses above macro.
	(kom-move-text): Standard prefix-arguments.
	(lyskom-annoying-verify-add-rcpt): New function.
	(lyskom-add-sub-recipient): Arguments changed. Runs the hook
	lyskom-add-sub-recipients-hook, which may alter the new variables
	lyskom-add-sub-recipient-action,
	lyskom-add-sub-recipient-source-conf and/or
	lyskom-add-sub-recipient-target-conf.

2000-06-06  Joel Rosdahl  <joel@lysator.liu.se>

	* commands1.el (lyskom-comment-recipients): Don't send footnotes
	to the super conference of a original-type conference.

	* commands1.el (lyskom-comment-recipients): Fixed a bug that
 	sometimes prevented the author's mailbox from being added as
 	recipient when it should.

2000-06-05  David Byers  <davby@ida.liu.se>

	* utilities.el (lyskom-read-text-no-prefix-arg): Don't use zerop
	on something that might be a symbol

	* review.el (kom-review-comments): Fixed nesting error that caused
	this command not to work at all.

2000-06-04  David Byers  <davby@ida.liu.se>

 	Experimantal special handling of attachments:
	* view-text.el (lyskom-insert-deferred-header-comm): Use
	lyskom-get-text-attachments.
	(lyskom-follow-comments): Same here.
	(lyskom-insert-deferred-header-comm): Same here.
	(lyskom-insert-header-comm): Same here.
	(lyskom-skip-attachments): New function.
	(lyskom-get-text-attachments): New function.
	(lyskom-follow-comments): Skip and mark attachments as read (if
	requested).

2000-06-04  Per Cederqvist  <ceder@moria>

	* edit-text.el (lyskom-edit-send-check-recipients): The code that
	checks if all the authors of all the commented texts are a member
	in at least one of the recipients only worked if there was at most
	one author.  Fix.

2000-06-02  David Byers  <davby@ida.liu.se>

	* view-text.el (lyskom-follow-comments): Don't follow attachments
	unless kom-follow-attachments is set.

	* vars.el.in (kom-follow-attachments): New variable.

	* view-text.el (lyskom-view-text): Removed SOJGE code.
	(lyskom-follow-comments): Removed SOJGE code. Get mx-attachments
	from text. 
	(lyskom-view-text-handle-saved-comments): Removed SOJGE code.

	* vars.el.in (kom-w3-simplify-body): Removed SOJGE code
	(kom-no-comments-to-motd, lyskom-show-comments)

	* startup.el (kom-start-anew): Removed SOJGE code.

	* lyskom-rest.el (kom-save-text): Use lyskom-saved-file to save
	the most recently specified file name.

	* lyskom-buttons.el (lyskom-button-save-text): New function.

	* lyskom-rest.el (kom-save-text): Accept list of texts to save as
	argument.

	* swedish-strings.el: Lade till arkivera i kontextmenyn för
	inläggsnummer. 

	* vars.el.in (kom-saved-file-name): New variable replaces
	lyskom-saved-file.

	* lyskom-rest.el (kom-save-text): Put the default file in the
	minibuffer. Do not display the default file in the prompt. More
	informative prompt (show number of texts if saving many or text
	number if saving one). Expand file name.

	* review.el (kom-find-root): Better error message.
	(kom-find-root-review): Better error message.

	* commands2.el (kom-add-request-confirm): Better error messages.
	(kom-review-mail-headers): Better error message.

	* lyskom-rest.el (kom-save-text-body): Better error message.

	* commands2.el (kom-add-private-answer): Better error message.

	* commands1.el (lyskom-add-sub-comment): Handle failure to read
	text-no. 
	(lyskom-add-sub-footnote): Handle failure to read text-no.
	(lyskom-add-sub-recipient): Same here.
	(kom-mark-text): Better error message.
	(kom-unmark-text): Same here.

	* review.el (kom-review-noconversion): Better error message.
	Handle failure to read text-no.

	* lyskom-rest.el (kom-view): Better error message. Handle failure
	to read text-no.

	* commands1.el (kom-delete-text): Better error message. Handle
	failure to read text-no.

	* utilities.el (lyskom-read-text-no-prefix-arg): Zero default is
	the same as no default. Prompt for text number if there is no
	default.

 	Unify reading of text numbers:
	* commands2.el (kom-add-no-comments): Changed default text number.
	(kom-agree): Argument is not optional.

	* lyskom-rest.el (kom-save-text-body): Handle null text-no.

	* commands1.el (kom-view-commented-text): Argument is not
	optional.
	(kom-review-presentation): Use def-kom-command.
	(kom-comment-previous): Use lyskom-read-text-no-prefix-arg.
	(kom-write-footnote): Argument is not optional. Don't force prompt
	for text.
	(kom-private-answer-previous): Use lyskom-read-text-no-prefix-arg.
	

	* review.el (kom-review-noconversion): Use def-kom-command.
	(kom-review-tree): Use lyskom-read-text-no-prefix-arg.
	(kom-find-root): Use lyskom-read-text-no-prefix-arg.
	(kom-find-root-review): Use lyskom-read-text-no-prefix-arg.
	(kom-review-comments): Use lyskom-read-text-no-prefix-arg.

	* lyskom-rest.el (kom-view): Use lyskom-read-text-no-prefix-arg.

	* commands1.el (lyskom-add-sub-footnote): Use
	lyskom-read-text-no-prefix-arg.
	(lyskom-add-sub-comment): Use lyskom-read-text-no-prefix-arg.

	* utilities.el (lyskom-read-text-no-prefix-arg): Check
	kom-prompt-for-text-no.

	* commands1.el (lyskom-add-sub-recipient): Use
	lyskom-read-text-no-prefix-arg.

	* vars.el.in (kom-prompt-for-text-no): New variable.

	* commands1.el (kom-delete-text): Use
	lyskom-read-text-no-prefix-arg.

2000-05-31  David Byers  <davby@sen2.ida.liu.se>

	* Release av 0.46-BETA-J

2000-05-31  David Byers  <davby@ida.liu.se>

	* edit-text.el (kom-edit-insert-commented): Don't use 62 instead
	of ">" or ?>. Please.
	(kom-edit-insert-commented): Don't send the default prefix to
	lyskom-edit-insert-commented. nil now means default.
	(lyskom-edit-insert-commented): Prefix nil means use default prefix.

 	New calling conventions for lyskom-view-text-hook
	* view-text.el (lyskom-filter-signature-hook): Use
	lyskom-view-text-text and lyskom-view-text-text-stat

	* vars.el.in (lyskom-view-text-hook): Fixed docstring.

	* view-text.el (lyskom-view-text): Set lyskom-view-text-text and
	lyskom-view-text-text-stat.

	Scrolling problems
	* mship-edit.el (lp--scroll-advice): Fixed bug that caused most of
	the code to run in any buffer.

2000-05-30  David Byers  <davby@ida.liu.se>

	* command.el (lyskom-fix-interactive-decl): Bind
	lyskom-current-command, not lyskom-executing-command.

2000-05-30  Johan Sundström  <jhs@lysator.liu.se>

	* view-text.el (lyskom-filter-signature-hook): New function. Would
	probably be nice to add as a configuration option too, instead of
	being just hookable. :-]
	(lyskom-text-is-mail-p): New ad-hoc support function.

	* swedish-strings.el, english-strings.el (lyskom-message): Added
	the string reformat-signature.

2000-05-29  David Byers  <davby@ida.liu.se>

	* lyskom-rest.el (lyskom-is-loaded): Don't bind
	frame-icon-title-format or frame-title-format unless they already
	exist. 

	* commands2.el (lyskom-iter-list-news): Added at-least and at-most
	arguments. Renamed all variables referenced in the calleing
	environment to lyskom-iter-list-news-*.
	(kom-list-news): Same here.

	* command.el (def-kom-emacs-command): Moved paren that caused
	commands never to be run as Emacs commands.
	(def-kom-emacs-command): Removed pointless concat.

2000-05-29  Johan Sundström  <jhs@lysator.liu.se>

	* view-text.el (lyskom-view-text): Marks now show themselves,
	always. Perhaps ought not to when kom-default-mark is set, and
	this really ought to be done as a %m or something flag to
	lyskom-format with context menus to change or remove a mark, but
	that will have to wait for the time being.

	* swedish-strings.el, english-strings.el (lyskom-message): Altered
	the strings marked-by-you and marked-by-you-and-others somewhat.

2000-05-28  Johan Sundström  <jhs@lysator.liu.se>

	* commands2.el (kom-list-news): Rehacked from scratch. Now
	complies to present-day (..., present-time! Moah-ha-ha! :-)
	elisp-client coding standards. Also generally faster now.
	(lyskom-list-news): New function.
	(lyskom-iter-list-news): [New] support function to kom-list-news.

	* english-strings.el (lyskom-message): Fixed what looked like a
	bug in total-unreads.

	* swedish-strings.el, english-strings.el (lyskom-message): Added
	the strings shown-unreads and no-unreads-shown.

2000-05-28  Johan Sundström  <jhs@lysator.liu.se>

	* edit-text.el (kom-edit-insert-commented): Edit-mode ^C^Y may now
	be preceded with ^U to insert the text totally unchanged, that is,
	without prefixing its rows with anything at all.
	(lyskom-edit-get-commented): Now takes an optional additional
	argument list sent to the callback.
	(lyskom-edit-insert-commented): Now takes an optional additional
	parameter `prefix' that is prepended to each line. Unfortunately I
	had to add a kludge to stay compatible with kom-edit-insert-text,
	which seems to be doing some black magic. These functions really
	ought to be changed to use a lyskom-edit-insert-text function.

2000-05-27  Johan Sundström  <jhs@lysator.liu.se>

	* commands2.el (kom-list-news): Fixed introduced bug. Works
	without arguments again.

2000-05-27  Johan Sundström  <jhs@lysator.liu.se>

	* commands2.el (kom-list-news): Now understands negative numeric
	arguments as signifying "list conferences with at most |argument|
	and at least one unread message in them". A prefix argument of
	zero still lists all conferences.

	* swedish-strings.el, english-strings.el (lyskom-message): Added
	the string list-unread-with-at-most-n-unread.

2000-05-26  David Byers  <davby@ida.liu.se>


 	Unread marker in title bar
	* vars.el.in (kom-show-unread-in-frame-title): New variable.
	
	* lyskom-rest.el (lyskom-is-loaded): Set
	lyskom-unread-title-format, frame-title-format and
	frame-icon-title-format.
	(lyskom-unread-title-format): New variable.

	* buffers.el (lyskom-traverse-buffer-hierarchy): New function.
	(lyskom-remove-unread-buffer): Clear flags in the buffer saying
	that the buffer has unreads.
	(lyskom-add-unread-buffer): Set flags in the buffer saying that
	the buffer has unreads.

	* commands1.el (lyskom-quit): Use lyskom-remove-unread-buffer.

 	Bind lyskom-executing-command in interactive forms
	* command.el (lyskom-fix-interactive-decl): New function puts a
	let around evaluated arguments to interactive that binds
	lyskom-executing-command to the current command.
	(def-kom-command): Use it.
	(def-kom-emacs-command): Use it.
	(def-kom-command): Sanity check and attempt repair when missing
	docstring or interactive declaration.
	(def-kom-emacs-command): Same here.

2000-05-24  David Byers  <davby@ida.liu.se>

	* utilities.el (lyskom-default-collate-table): Removed \201s added 
	by MULE Emacs. ¡ELUM ckuF

	* compatibility.el (lyskom-encode-coding-char): New set of
	compatibility definitions for Gnu Emacs.

	* utilities.el (lyskom-unicase): Don't use aset on a string. Make
	a vector from the string, use aset and make a string from the
	vector.
	(string-to-sequence): Stole from Gnu Emacs mule-utils.
	(string-to-vector): Also stolen.

2000-05-23  David Byers  <davby@ida.liu.se>

	* compatibility.el: Detect buggy versions of encode-coding-string
	and decode-coding-string and provide a correcting wrapper.

	* lyskom-rest.el (lyskom-w3-region): Remove compiler warning about 
	unreferenced variable.
	(lyskom-do-insert): Same here.

	* flags.el (lyskom-save-options): Remove compiler warning about
	unreferenced variable.

	* utilities.el (lyskom-unicase-char): Use
	lyskom-encode-coding-char.

	* compatibility.el (lyskom-encode-coding-char): New function/macro.
	
	* async.el (lyskom-show-logged-in-person): Print server name, not
	KOM if the server is not in kom-server-aliases.
	(lyskom-show-logged-out-person): Same here.

	* commands1.el (lyskom-info-line-format-string): Compute field
	widths correctly, even for very wide windows.

2000-05-22  David Byers  <davby@sen2.ida.liu.se>

	* completing-read.el (lyskom-complete-string): Construct the final
	string by using concat rather than filling the chars of a vector
	by hand. The losing MULE implementation will fail if you say
	something like (aset string 0 ?å) because å is multibyte and aset
	will only set one *byte*.

2000-05-19  David Byers  <davby@sen2.ida.liu.se>

	* startup.el (lyskom): Get the collate table from the
	server. Note: thie needs to be protected so it isn't called on
	servers that don't have the call!

	* utilities.el (lyskom-unicase-char): Encode the char using server
	default coding system. Otherwise this will not work with multibyte
	latin1 chars in Gnu Emacs. ELUM wercS.

2000-05-19  David Byers  <davby@ida.liu.se>

	* vars.el.in: Reinstated changes lost between 44.98 and 44.99.

	* commands1.el (kom-write-footnote): Reinstated changes lost
	between 44.66 and 44.67.

	* commands2.el (kom-add-faq): Reinstated changes lost between
	44.63 and 44.64.

2000-05-15  David Byers  <davby@ida.liu.se>
	
	* commands2.el (lyskom-send-message-resize-minibuffer): New
	implementation. 

2000-05-19  Johan Sundström  <jhs@lysator.liu.se>

	* commands2.el (kom-is-person-member-of-conference): New function.

	* vars.el.in (lyskom-commands): New function. [Added
	kom-is-person-member-of-conference]

	* swedish-strings.el, english-strings.el (lyskom-message): Added
	the strings pers-to-check-mship-for, conf-to-check-mship-of,
	conf-is-empty, pers-is-member-of-conf and
	pers-is-not-member-of-conf to provide for the needs of
	kom-is-person-member-of-conference.
	(lyskom-command): kom-is-person-member-of-conference added.

	* commands1.el (kom-view-commented-text): Removed code already
	covered by lyskom-read-text-no-prefix-arg.
	(kom-unmark-text, kom-mark-text): Harmonized to use
	lyskom-read-text-no-prefix-arg, as should IMO all interactive
	message-handling functions.
	(lyskom-unmark-text): Now take just one	argument, not two. Fully
	non-interactive, since questions are posed in kom-unmark-text.
	(lyskom-mark-text): Second argument changed to an optional mark to
	use, other changes analogous to the above function.

	* lyskom-buttons.el (lyskom-button-mark-text,
	lyskom-button-unmark-text): Function calls to the above altered.

2000-05-04  David Byers  <davby@ida.liu.se>

	* utilities.el (lyskom-read-text-no-prefix-arg): Added default
	parameter.
	
	* commands2.el (kom-add-faq): Default text is the most recently
	seen text the user wrote, or the most recently written one.

	* commands1.el (kom-write-footnote): Default text is the most
	recently seen text the user wrote, or the most recently written
	one.

	* view-text.el (lyskom-print-text): Update
	lyskom-last-seen-written.

	* commands2.el (kom-add-faq): Use lyskom-read-text-no-prefix-arg.

	* vars.el.in (lyskom-last-seen-written): New variable.

Thu May  4 15:05:51 2000  David Byers  <davby@sen2.ida.liu.se>

	* Release av 0.46-BETA-I

2000-05-04  David Byers  <davby@ida.liu.se>

	* edit-text.el (lyskom-edit-insert-buglist): Use our copy of
	thing-at-point-looking-at instead of the one in thingatpt.

	* utilities.el (lyskom-thing-at-point-looking-at): Copied from
	thing-at-point-looking-at in thingatpt.el

	* english-strings.el (lyskom-en-edit-mode-map): Added binding for
	kom-edit-insert-buglist.

2000-05-01  David Byers  <davby@ida.liu.se>

	* async.el (lyskom-parse-async): Expanded comment for
	async-deleted-recipient.

2000-05-01  Johan Sundström  <jhs@lysator.liu.se>

	* edit-text.el (lyskom-edit-insert-buglist): Bugfixed, somewhat
	improved regarding the matcher regexps, but most of all commented
	-- it still uses thing-at-point-looking-at for no good reason,
	though.

2000-04-29  Johan Sundström  <jhs@lysator.liu.se>

	* utilities.el (lyskom-read-text-no-prefix-arg): Minor code
	cleanup and more error handling.

	* edit-text.el (kom-edit-insert-buglist): New command in the edit
	window for inserting a commented Roxen IS style bug/todo-list.
	(lyskom-edit-insert-buglist): Implements the lower-level parts of
	the above. Relies on the availability of thing-at-point-looking-at
	from lack of better knowledge of elisp. :-}

	* swedish-strings.el (lyskom-sv-edit-mode-map): Added binding for
	kom-edit-insert-buglist; C-c C-b for now.
	(lyskom-menu): Added menu shortcut for kom-edit-insert-buglist.

	* utilities.el: (lyskom-read-text-no-prefix-arg): Negative prefix
	arguments are now interpreted as a reference to the text-no `arg'
	messages up in the kom buffer.

	* commands1.el (kom-view-commented-text): Now uses
	lyskom-read-text-no-prefix-arg to optionally override text-no via
	prefix arguments instead of the current text.

	* review.el (kom-review-noconversion): Same here.

	* swedish-strings.el (lyskom-message): Added strings
	review-noconversion-q and review-commented-q to accomodate for
	the above functions.

2000-04-01  David Byers  <davby@ida.liu.se>

	* mship-edit.el (lp--calculate-distance): Fix problem when
	stepping backwards too far.
	(lp--next-entry): Handle invisible entries.
	(lp--previous-entry): Same here.
	(lp--last-entry): Handle case when all entries are invisible.
	(lp--first-entry): Same here.
	(lp--scroll-advice): Same here.

2000-03-29  David Byers  <davby@ida.liu.se>

	* commands2.el (kom-review-mail-headers): Never wrap e-mail
	headers.

2000-03-27  David Byers  <davby@ida.liu.se>

	* utilities.el (nfirst): Non-recursive implementation to avoid
	hitting max-eval-depth when reviewing old texts.

2000-03-26  David Byers  <davby@ida.liu.se>

	* vars.el.in (kom-morons): New variable.
	(lyskom-faces): Added kom-morons-face.
	(lyskom-face-schemes): Added kom-korons-face.

	* vars.el (kom-presence-messages): Document use of morons.

	* option-edit.el (lyskom-customize-buffer-format): Added kom-korons.
	(lyskom-custom-variables): Added kom-morons.

	* lyskom-buttons.el (lyskom-generate-button): Added support for
	kom-morons.

	* english-strings.el (lyskom-custom-strings): Added strings for
	kom-morons.

	* async.el (lyskom-show-presence): Added support for kom-morons.

2000-03-22  David Byers  <davby@ida.liu.se>

	* compatibility.el (signum): New compatibility function.

	* mship-edit.el: Support for hidden entries in motion and entry
	movement commands.
	(lp--next-visible-entry): New function.
	(lp--get-last-visible-entry): Renamed from lp--get-last-entry.

2000-03-21  David Byers  <davby@ida.liu.se>

	* mship-edit.el (lp--do-select-entries): Never select invisible
	entries.
	(lp--entry-set-visible): New function.
	(lp--redraw-entry): Don't draw invisible entries.
	(lp--move-up): Use lp--calculate-distance to take invisible
	elements into account.

	* compatibility.el (lyskom-make-face): New function.
	(find-face): New compatibility function.
	(face-background-name): New compatibility function.

	* macros.el: Removed lyskom-make-face.

	* mship-edit.el (lp--entry-set-background): New function.
	(lp--entry-update-extents): New function.
	(lp--format-entry): Set background according to selected status.
	(lp--redraw-entry-mark): Same here.
	(lp--print-entry): Update entry extents when done.
	(lp--erase-entry): Same here.

	* lyskom-rest.el (kom-next-command): Set the priority of the
	scroll indicator extent to something high so it overrides whatever
	is already on that line.

2000-03-16  David Byers  <davby@ida.liu.se>

	* mship-edit.el: Renamed set-lp--entry-pri-and-pos to
	lp--set-entry-pri-and-pos.
	(lyskom-change-membership-priority): Don't lyskom-sort-to-do-list
	since lyskom-sort-membership will.
	(lyskom-change-membership-position): Don't lyskom-sort-to-do-list
	since lyskom-update-membership-positions will.
	(lp--update-membership): Don't update position or priority unless
	necessary. 
	(lp--quit): New command.

2000-03-15  David Byers  <davby@ida.liu.se>

	* option-edit.el (lyskom-create-widget): Use `-' and not `!' in
	help button when documentation is visible.
	(lyskom-customize-buffer-format): Added kom-keep-alive-interval.
	(lyskom-custom-variables): Ditto.

	* command.el (lyskom-start-of-command): Print special message if
	called in something that does not look like it has ever been a
	LysKOM buffer.

	* commands2.el (lyskom-keep-alive-timers): New variable.
	(lyskom-keep-alive-callback): New function.
	(kom-keep-alive): New command.
	(lyskom-keep-alive): New function.
	(kom-stop-keep-alive): New command.
	(lyskom-stop-keep-alive): New function.

	* vars.el.in (kom-keep-alive-interval): New variable.

	* lyskom-rest.el (lyskom-debug-insert): Fixed bug that caused
	debug output to be inserted in LysKOM buffer (took five seconds to
	do, has been put off for *years*).

	* Release av 0.46-BETA-H

	* view-text.el (lyskom-format-mx-author): Make mx-from clickable.

	* lyskom-buttons.el (lyskom-default-button): URLs and e-mail get
	kom-url-face.

	* commands2.el (kom-review-mail-headers): Transform text headers
	as an external text.

	* lyskom-buttons.el (lyskom-button-transform-text): Don't add
	text, conf or pers buttons when transforming an external text.

2000-03-11  David Byers  <davby@ida.liu.se>

	* menus.el (lyskom-define-menu-xemacs): Encode menu item strings
	to avoid the 201s showing up in menus.

	* lyskom-buttons.el (lyskom-make-button-menu): Encode menu item
	strings to avoid the 201s showing up in popup menus.

	* mship-edit.el: Tweaked various motion commands.

2000-03-10  David Byers  <davby@ida.liu.se>

	* mship-edit.el (lp--format-entry-expansion): New function.
	(lp--format-entry): Split off formatting the second line. Do
	lyskom-replace-deferred here.
	(lp--format-insert-entry-2): Removed.
	(lp--format-insert-entry): Call lp--format-entry do replace
	deferred on the first line and lp--format-entry-expansion for the
	second line, if needed. Check if the second line needs to be
	formatted here rather than in lp--format-entry.

2000-03-07  David Byers  <davby@ida.liu.se>

	* option-edit.el (lyskom-ispell-dictionary-widget): Fixed bug that
	caused no dictionary names to be listed if ispell was installed.

	* swedish-strings.el (lyskom-sv-customize-map): Bound button2 and
	button3 to kom-mouse-null.

	* english-strings.el (lyskom-en-customize-map): Fixed definition
	of lyskom-sv-customize-map.

2000-03-06  David Byers  <davby@ida.liu.se>

	* lyskom-buttons.el (lyskom-view-url-netscape): Quote parens in
	URLs sent to Netscape.

2000-03-03  David Byers  <davby@ida.liu.se>

	* lyskom-rest.el (lyskom-w3-region): Save restriction, make start
	and end markers so that simplifying the body tag won't screw
	things up.

	* startup.el (lyskom-www-proxy-connect-filter): Match HTTP/1.1
	responses (and also 1.2 and 1.3 and so on.)
	(lyskom): Send additional headers to HTTP proxy.

	* vars.el.in (kom-www-proxy-headers): New variable.

2000-02-26    <davby@ida.liu.se>

	* option-edit.el (lyskom-ispell-dictionary-widget): Protect this
	agains ispell not being available or failing to load. 

2000-02-21    <davby@ida.liu.se>

	* vars.el.in (kom-url-managers): Added "windows" url manager.
	(kom-url-viewer-preferences): Use "windows" instead of "netscape"
	as default url manager.

2000-02-20    <davby@ida.liu.se>

	* lyskom-buttons.el (lyskom-view-url-netscape): Added more
	possible values for window-system on MS-Windows systems (courtesy
	RMS who does not want to associate "win" with MS-Windows and the
	XEmacs team who thinks mswindows is prettier than w32 or win32.)

2000-02-17  David Byers  <davby@sen2.ida.liu.se>

	* aux-items.el: Encode aux-items that need to be encoded with the
	default server coding system.

2000-02-17  David Byers  <davby@ida.liu.se>

	* utilities.el: Honor standard-output if no stream is specified.

	* swedish-strings.el: Bind swedish characters explicitly as well
	as with lyskom-keys so that bindings will work in Windows XEmacs
	too. 

Wed Feb 16 16:13:46 2000  David Byers  <davby@sen2.ida.liu.se>

	* Release av 0.46-BETA-G

2000-02-11  David Byers  <davby@ida.liu.se>

	* utilities.el (lyskom-lookup-key): Vectorify event no matter what
	keymap is.

2000-01-17  David Byers  <davby@ida.liu.se>

	* vars.el.in (kom-server-aliases): Added Roxen Community KOM.

2000-02-08  David Byers  <davby@ida.liu.se>

	* vars.el.in (kom-complete-numbers-before-names): New variable.

	* completing-read.el (lyskom-read-conf-internal): Add the option
	to complete numbers before completing names.

2000-01-27  David Byers  <davby@ida.liu.se>

	* flags.el (lyskom-flag-value-to-string): New function.
	(lyskom-flag-value-to-string): New function.
	(lyskom-save-options): Use it.

	* filter.el (lyskom-create-filter): New function.
	(make-filter): Use it.

2000-01-17  David Byers  <davby@ida.liu.se>

	* compatibility.el (lyskom-xemacs-keysym): Fixed C-å and C-Å.

2000-01-11  David Byers  <davby@ida.liu.se>

	* edit-text.el (lyskom-edit-add-recipient/copy): Make moving texts
	work again.

	* commands1.el (kom-move-text): Pass the correct text number to
	lyskom-add-sub-recipient.
	(lyskom-add-sub-recipient): Read text number if text-no-arg is
	nil, even if caller claims it's done.
	(kom-move-text): Pass the correct text-no to
	lyskom-add-sub-recipient. 

Tue Jan 11 11:58:38 2000  David Byers  <davby@sen2.ida.liu.se>

	* Release av 0.46-BETA-F

2000-01-11  David Byers  <davby@ida.liu.se>

	* flags.el (kom-save-options): Was removed by mistake.

	* compatibility.el (plist-member): New function.

	* distribution-Makefile (SOURCES): Added mship-edit.el

Tue Jan 11 00:37:57 2000  David Byers  <davby@sen2.ida.liu.se>

	* Release av 0.46-BETA-E

2000-01-03  David Byers  <davby@ida.liu.se>

	* commands1.el (lyskom-private-answer-soon): Fix buggy nesting.
	How the *hell* does this happen?

1999-12-21  David Byers  <davby@ida.liu.se>

	* lyskom-rest.el (lyskom-fill-region): Never signal errors in
 	fill-region.

1999-12-20  David Byers  <davby@ida.liu.se>

	* services.el (initiate-create-anonymous-text): Work. Put STRING
	in front of message string so lyskom-format-objects recognizes
	what it is.

1999-12-18  David Byers  <davby@ida.liu.se>

	* lyskom-rest.el (lyskom-next-command): Use unwind-protect to
	reset lyskom-doing-default-command because Gnu Emacs loses when
	you let a buffer-local variable and change buffers inside the let
	body (it resets the value in buffer current when leaving the let)

1999-12-13  David Byers  <davby@ida.liu.se>

	* reading.el: Set buffer to lyskom-buffer in several
	membership-related functions.

	* lyskom-rest.el (lyskom-try-get-membership): Set buffer to
 	lyskom-buffer.
	(lyskom-get-membership): Same here.

1999-12-11  David Byers  <davby@ida.liu.se>

	* option-edit.el: Honor properties specified in
	lyskom-custom-variables by using lyskom-build-simple-widget-spec
	to build all widgets.
 	(lyskom-build-simple-widget-spec): New function.
	

	* reading.el (lyskom-do-insert-membership): New function.
	(lyskom-replace-membership): Use lyskom-do-insert-membership and
	lyskom-do-remove-membership.
	(lyskom-do-remove-membership): New function.
	(lyskom-remove-membership): Use it.

	* commands1.el (lyskom-sub-member): Don't call
	lyskom-remove-membership with membership-list arg.

	* async.el (lyskom-async-forced-leave-conf): Don't call
	lyskom-remove-membership with membership-list arg.

	* mship-edit.el (lyskom-prioritize-flag-toggle): Don't call
	lyskom-replace-members with membership-list arg.

	* commands2.el (kom-set-unread): Don't call lyskom-replace-members
 	with membership-list arg.

	* async.el (lyskom-async-new-membership): Don't call
	lyskom-replace-members with membership-list arg.

	* reading.el (lyskom-insert-membership): Insert the membership at
	the correct position in the membership list.

	* commands1.el (lyskom-add-membership): Call without
	membership-list argument.

	* startup.el (lyskom-set-membership): Use lyskom-sort-membership.

	* lyskom-rest.el (lyskom-membership-<): Consider positions as well 
	as priorities.

	* commands1.el (lyskom-try-add-member): Added
 	need-extra-information parameter.
	(kom-add-member): Call lyskom-try-add-member with
 	need-extra-information.
	(kom-add-self): Same here.
	(kom-change-priority): Same here.
	(lyskom-add-member-by-no): Same here.
	(lyskom-add-member-answer): Accept answer containing position
	parameter. Set position of new membership using position parameter 
	if it is not supplied by the server.

1999-12-10  David Byers  <davby@ida.liu.se>

	* commands1.el (lyskom-sub-member): Don't try to passivate unless
	we have passive memberships in the server.

	* option-edit.el (lyskom-customize-apply): Set the default value
	of a variable when the user says not to save it in the server.
	(lyskom-customize-send): Set variables in the Emacs buffer using
	setq-default. Don't quote nil or t in the output.

2000-01-10  David Byers  <davby@ida.liu.se>

	* flags.el (lyskom-read-options-eval): Add format argument to
	lyskom-message to avoid possible problems with
	error-in-options-short string.

	* edit-text.el (lyskom-edit-send-check-recipients): Same here.
	(kom-insert-last-info-nodename): Same here.

2000-01-06  David Byers  <davby@ida.liu.se>

	* lyskom-rest.el (j-or-n-p): Output the answer in the minibuffer
	like y-or-n-p in XEmacs (and probably Emacs) does.

	* swedish-strings.el (lyskom-message): Added yes-string and
	no-string.

	* services.el (blocking-do-multiple): Added edebug-form-spec for
	blocking-do-multiple.

	* commands1.el (lyskom-add-sub-recipient): Confirm adding as full
	recipient. 

	* edit-text.el (lyskom-edit-add-recipient/copy): Removed duplicate
	calls to lyskom-edit-do-add-recipient/copy. Confirm adding as full
	recipient.

1999-12-29  David Byers  <davby@ida.liu.se>

	* commands1.el (lyskom-add-sub-recipient): Point at start of
	minibuffer when reading target conference.

1999-12-13  David Byers  <davby@ida.liu.se>

	* lyskom-rest.el (lyskom-recursive-prompt-update): New variable.
	(lyskom-update-all-prompts): Set lyskom-recursive-prompt-update to
	avoid endlessly recursing into this function (via lyskom-beep,
	sit-for and the filter function.)

1999-12-10  David Byers  <davby@ida.liu.se>

	* commands1.el (kom-move-text): Supply better defaults for
	conferences. 

1999-12-07  David Kågedal  <davidk@lysator.liu.se>

	* swedish-strings.el (lyskom-sv-mode-map): lyskom-keys was called
	with at string at a couple of places.

1999-12-05  David Byers  <davby@ida.liu.se>

	* Makefile (SOURCES): Added mship-edit.el.

1999-12-04  David Byers  <davby@ida.liu.se>

	* mship-edit.el (lp--maybe-update-entry-for-conf): New function.
	(lp--compute-format-string): Properties on unreads.
	(lp--maybe-update-unreads): New function.
	(lp--update-buffer): Support adding and removing memberships.

	* deferred-insert.el (lyskom-replace-deferred): Perform the
	deferred insertion in the right buffer.

	* view-text.el (lyskom-mark-as-read-callback): New function.
	(lyskom-mark-as-read): Call it.

1999-12-03  David Byers  <davby@ida.liu.se>

	* flags.el: Removed commented kom-edit-options stuff.

	* swedish-strings.el (lyskom-sv-mode-map): Fixed remaininig
	bindings of swedish characters.

1999-12-03  David Byers  <davby@sen2.ida.liu.se>

	* swedish-strings.el, english-strings.el (lyskom-command): Removed
	kom-edit-options.

	* flags.el: Commented out all the kom-edit-options stuff.
	(lyskom-save-options): Fix string encoding of user area
	(it was really messed up.)

1999-12-03  David Byers  <davby@ida.liu.se>

	* command.el (lyskom-read-extended-command): Use
	lyskom-maybe-recode-string in place of last patch.

	* buffers.el (lyskom-generate-new-buffer): Use
	lyskom-maybe-recode-string to maybe recode the buffer name.
	(lyskom-get-buffer-create): Here too.

	* utilities.el (lyskom-maybe-recode-string): New function.

1999-12-03  David Byers  <davby@sen2.ida.liu.se>

	* command.el (lyskom-read-extended-command): Patch in order to do
	correct completion in a unibyte environment with multibyte strings
	as alternatives.

Fri Dec  3 11:54:28 1999  David Byers  <davby@sen2.ida.liu.se>

	* Release av 0.46-BETA-D

1999-12-03  David Byers  <davby@ida.liu.se>

	* startup.el (lyskom): Use lyskom-string-rassoc to find KOMSERVER
	in kom-server-aliases.
	(lyskom-read-server-name): Use lyskom-string-assoc to find server
	name.

	* utilities.el (lyskom-string-rassoc): New function.

	* option-edit.el (lyskom-customize-buffer-format): Added
	kom-server-priority and kom-server-priority-breaks.
	(lyskom-custom-variables): Same here.

	* english-strings.el,swedish-strings.el (lyskom-custom-strings):
	Updated customization strings for kom-server-priority and
	kom-server-priority-breaks.

1999-12-02  David Byers  <davby@ida.liu.se>

	* lyskom-rest.el (lyskom-what-to-do): Fix code to handle
	kom-server-priority-breaks properly.

	* option-edit.el (lyskom-custom-variables): Added
	kom-server-priority-breaks.

	* lyskom-rest.el (lyskom-set-mode-line): Use
	lyskom-remove-unread-buffer and lyskom-add-unread-buffer.
	(lyskom-sentinel): Use lyskom-remove-unread-buffer.
	(lyskom-update-all-prompts): New function.

	* buffers.el (lyskom-remove-buffer-from-unread-lists): New
	function.

1999-12-01  David Byers  <davby@ida.liu.se>

	* commands2.el (lyskom-next-kom): Use
	lyskom-clean-all-buffer-lists.

	* commands1.el (lyskom-quit): Use lyskom-remove-buffer-from-lists.

	* buffers.el (lyskom-add-unread-buffer): New function.

	* command.el (lyskom-start-of-command): Use
	lyskom-current-prompt-args.

	* vars.el.in (lyskom-current-prompt-args): New variable.

	* lyskom-rest.el (lyskom-update-prompt): Added
	lyskom-current-prompt-args

1999-11-23  David Byers  <davby@ida.liu.se>

	* vars.el.in (kom-server-priority): New variable.

1999-11-22  David Byers  <davby@ida.liu.se>

	* lyskom-rest.el (lyskom-what-to-do): Added PRI-SESSION.
	(lyskom-next-command): Added next-pri-session.
	(lyskom-update-prompt): Added next-pri-session. Prompts are now
	format strings.
	(kom-go-to-pri-session): New function.

1999-11-21  David Byers  <davby@ida.liu.se>

	* view-text.el (lyskom-mark-as-read): Check for null text-stat.

	* services.el (initiate-create-text): Fix old version of the call.

1999-12-02  David Byers  <davby@sen2.ida.liu.se>

	* flags.el (lyskom-read-options-eval-get-holerith): Skip newlines
	too.
	(lyskom-read-options-eval): Surround everything with a catch-all
	error handler or we won't be able to log in if the user area is
	broken.

1999-12-01  David Byers  <davby@ida.liu.se>

	* compatibility.el (decode-coding-string, encode-coding-string):
	Copy the string using copy-sequence to really emulate the real
	thing.

	* utilities.el (lyskom-string=):  Works even if an argument is
	nil.

Thu Nov 25 17:05:19 1999  David Byers  <davby@sen2.ida.liu.se>

	* Release av 0.46-BETA-C på riktigt

1999-11-25  David Byers  <davby@ida.liu.se>

	* swedish-strings.el: Use lyskom-keys for all swedish chars in the
	keymaps.
	
	* compatibility.el (lyskom-gnu-keysym): Added swedish chars to the
	list.
	
	* commands1.el (lyskom-change-pres-or-motd-2): Fixed nesting bug
	that caused the callback not to be called.

1999-11-23  David Byers  <davby@ida.liu.se>

	* commands1.el (lyskom-private-answer-soon): Fixed nesting bug
	that caused two personal reply buffers to be created.

1999-11-23  Per Hedbor	 <per@idonex.se>
	* services.el (initiate-create-text): Fixed support for old lyskom
	servers without call 86.
	
1999-11-22  David Byers  <davby@ida.liu.se>

	* completing-read.el (lyskom-complete-string): Use character space
	and not ASCII space.

	* lyskom-rest.el (lyskom-modeline-keymap): Go to unread session on
	mouse up, not mouse down since mouse up event is bound to bad
	things in XEmacs.

	* edit-text.el (lyskom-edit-get-commented): Rewrote as blocking.

	* option-edit.el (lyskom-custom-variables): Added last-recipient
	option to kom-default-message-recipient.

	* vars.el.in (lyskom-last-message-recipient): New variable.

	* commands2.el (kom-send-message): Added last-recipient option to
	kom-default-message-recipients..

1999-11-21  David Byers  <davby@ida.liu.se>

	* edit-text.el (lyskom-edit-insert-miscs): Use lyskom-princ to
	insert subject.

	* slow.el (kom-expand-slow-command): Use lyskom-string=

	* flags.el (lyskom-read-options-eval): Use lyskom-string=

	* edit-text.el (kom-ispell-message): Use lyskom-string=
	(lyskom-send-enriched): Same here.

	* completing-read.el (lyskom-completing-member): Same here.

	* commands1.el (kom-change-password): Use lyskom-string=
	(lyskom-return-username): Same here.

	* utilities.el (lyskom-string=): New function.
	(lyskom-string-assoc): Use it.

	* language.el (lyskom-language-coding): New function.
	(lyskom-define-language): Added argument CODING.

	* lyskom-rest.el (lyskom-update-prompt): Set rear-nonsticky on
	prompt text properties.

	* view-text.el (lyskom-format-text-footer): Use string-width, not
	length to compute width of author name, width of text number,
	flags.

	* option-edit.el (lyskom-widget-name-value-create): Use
	string-width to compute padding.
	(lyskom-widget-command-value-create): Ditto.
	(lyskom-widget-kbd-macro-value-create): Same here.

	* lyskom-buttons.el (lyskom-keyboard-menu): USe string-width to
	get the width of a string.

	* completing-read.el (lyskom-read-session-resolve-ambiguity): Use
	string-width to get width of a string.

	* commands2.el (kom-status-conf): Use string-width, not length, to 
	get width of string.

	* filter.el (lyskom-recompile-filter): New function.

	* flags.el (lyskom-read-options-eval-get-holerith): Handle
	explicitly coded strings.
	(kom-edit-options-send): Output explicit coding for strings in the 
	elisp area.
	(lyskom-read-options-eval): Recompile filters after reading from
	user area.

1999-11-20  David Byers  <davby@ida.liu.se>

	* compatibility.el (lyskom-string-width): New function. Gnu Emacs
	MULE lossage workaround.
	(string-make-unibyte): New compatibility function.
	(string-make-multibyte): New compatibility function.
	(multibyte-string-p): New compatibility function.

	* lyskom-rest.el (lyskom-format-aux-help): Use
	lyskom-string-width, not string-width.

	* mime.el (lyskom-mime-string-charset): Use the server default
	coding system if no charsets were found (non-MULE Emacs.)

	* lyskom-rest.el (lyskom-prot-a-format-aux-item): Aux item data is 
	a raw string.

	* parse.el (lyskom-parse-aux-item): Aux item data is a raw string.

1999-11-19  Joel Rosdahl  <joel@lysator.liu.se>

	* README.debian: New build instructions.

	* ../Makefile: Build debian-package.
	
1999-11-19  David Byers  <davby@sen2.ida.liu.se>

	* lyskom-rest.el (lyskom-filter): Explicitly insert unibyte string
	representation. Gnu Emacs 20.3 compat kluge.
	
	* utilities.el (lyskom-looking-at): New function (Gnu Emacs 20.3
	bug workaround.)

	* edit-text.el (kom-ispell-message): Use lyskom-looking-at.
	(lyskom-edit-parse-headers): Same here.
	(lyskom-edit-extract-aux-item-flags): Same here.
	(lyskom-edit-extract-text): Same here.
	(lyskom-edit-on-aux-item): Same here.

	* lyskom-rest.el (lyskom-prot-a-format-string): string-as-unibyte
	the string or concat may convert us to multibyte later.
	(lyskom-prot-a-format-raw-string): Same here.

1999-11-19  David Byers  <davby@ida.liu.se>

	* compatibility.el (check-coding-system): Throw an error instead
	of returning nil.
	
	* parse.el (lyskom-init-parse): Turn off multibyte chars in the
	parse buffer.

	* utilities.el (lyskom-truncate-string-to-width): New function
	copied from Gnu Emacs.

	* Changed file coding of all files to iso-8859-1 since we now have
	the ambition to deal with multibyte text.
	
	* lyskom-rest.el (lyskom-format-aux-help): Use
	lyskom-truncate-string-to-width instead of substring.
	(lyskom-format-aux-help): Use string-width instead of length.
	(lyskom-format-aux-help): Same here.
	(lyskom-fill-message-line-length): Use current-column instead of
	point to calculate current line width.
	(lyskom-is-loaded): Encode lyskom-line-start-chars-string in
	ISO-8859-1 before using it.
	(silent-read): Don't disable multibyte characters.

	* defvar.el (lyskom-setup-minibuffer-variables): Don't disable
	multibyte characters.

	* buffers.el (lyskom-generate-new-buffer): Don't disable multibyte
	characters.
	(lyskom-get-buffer-create): Same here.

	* mime.el (lyskom-mime-string-charset): Use find-charset-string.

	* compatibility.el (check-coding-system): Provide dummy
	check-coding-system.

	* mime.el (lyskom-mime-charset-coding-system): Use
	check-coding-system.

	* startup.el (lyskom): Decode the motd text mass and format it as
	a text.

	* lyskom-rest.el (lyskom-format-aux-help): No longer accept text
	as an argument, because we can't decode it.
	(kom-save-text-body): Decode the text body.

	* filter.el (lyskom-filter-text-p-3): Decode the text mass of the
	text.

	* edit-text.el (lyskom-edit-add-recipient/copy): Decode the
	text-mass of the motd.
	(kom-edit-insert-text): Get the text-stat and text for
	lyskom-edit-insert-commented.
	(lyskom-edit-get-commented): Pass text and text-stat to thendo.

	* commands2.el (lyskom-print-summary-line): Decode the text mass.
	(lyskom-print-mark-summary-line): Same here.
	(lyskom-set-motd): Same here.Accept text stat as argument.
	(kom-set-motd): Get the text-stat and text and send them to
	lyskom-set-motd.

	* commands1.el (lyskom-write-comment-soon): Decode the text mass.
	(lyskom-private-answer-soon): Same here.
	(lyskom-private-answer-soon-prev): Same here.
	(lyskom-change-pres-or-motd-2): Same here.

	* komtypes.el (text->decoded-text-mass): New function.

	* Makefile (SOURCES): Added mime.el to the sources.

	* view-text.el (lyskom-print-text): Decode the string according to 
	the charset specified by the content type.

	* mime.el (lyskom-charset-alist): New variable.
	(lyskom-mime-string-charset): New function.
	(lyskom-mime-charset-coding-system): New function.
	(lyskom-mime-encode-string): New function.
	(lyskom-mime-decode-string): New function.
	(lyskom-mime-decode-content-type): New function.

	* utilities.el (lyskom-subset-p): New function.
	(lyskom-intersection): Moved from review.el

	* edit-text.el (lyskom-edit-send): Pass on aux-list even if we're
	anonymous.

1999-11-18  Joel Rosdahl  <joel@lysator.liu.se>

	* Makefile: Debian package building.

1999-11-17  David Byers  <davby@ida.liu.se>

	* startup.el (lyskom): Set process coding system to latin-1 again.
	Don't remember why I changed it in the first place.

	* lyskom-rest.el (lyskom-is-loaded): Add
	lyskom-remove-buffer-from-lists to kill-buffer-hook.

	* buffers.el (lyskom-remove-buffer-from-lists): New function.
	(lyskom-clean-buffer-list): Moved here from commands2.el
	(lyskom-clean-all-buffer-lists): Ditto.

	* lyskom-rest.el (lyskom-is-loaded): Add a hook to delete killed
	buffers from all buffer lists.

	* command.el (lyskom-end-of-command): Clean
	lyskom-sessions-with-unread, lyskom-sessions-with-unread-letters
	and lyskom-buffer list.

	* lyskom-rest.el (lyskom-sentinel): Remove buffer from
	lyskom-sessions-with-unread-letters.

1999-11-09  David Byers  <davby@ida.liu.se>

	* bugs.el (kom-bug-report): Moved here from commands.el.

	* async.el (lyskom-delete-old-text): Remove deleted text from
	lyskom-reading-list too.

1999-11-07  David Byers  <davby@ida.liu.se>

	* edit-text.el (lyskom-is-permitted-author): Use new version of
	lyskom-is-supervisor.

1999-11-06  David Byers  <davby@ida.liu.se>

	* commands1.el (lyskom-add-member-answer): Print useful messages
	when add fails because user is already a member.

	* utilities.el (lyskom-is-supervisor): New function.
	(lyskom-is-strictly-supervisor): Ditto.
	(lyskom-is-member): Ditto.

1999-11-17  Joel Rosdahl  <joel@lysator.liu.se>

	* Added README.debian and a debian subdirectory with files for
 	building a Debian package.

Wed Nov 17 13:54:15 1999  David Byers  <davby@sen2.ida.liu.se>

	* Release av 0.46-BETA-B

1999-11-17  David Byers  <davby@ida.liu.se>

	* lyskom-rest.el (lyskom-is-loaded): In XEmacs, set an extent on
	the "unread" text in the mode line with some basic key bindings.

	* commands2.el (kom-modeline-next-unread-kom): New function.
	(kom-modeline-select-unread-kom): New function.
	(lyskom-switch-to-kom-buffer): New function.
	(lyskom-next-kom): Use it.

1999-11-11  David Byers  <davby@ida.liu.se>

	* swedish-strings.el (lyskom-message): Added who-to-add-bcc-q.

	* commands1.el (lyskom-add-sub-recipient): Deal with add-bcc.

1999-11-08  David Byers  <davby@ida.liu.se>

	* reading.el (lyskom-read-info-<): Fixed stupid operator error.

1999-10-27  David Byers  <davby@ida.liu.se>

	* async.el (lyskom-async-new-recipient): Hantera situationen att
	man inte hittar det lokala textnumret.

1999-10-25  David Byers  <davby@ida.liu.se>

	* startup.el (lyskom): Set process coding system decoding to
	no-conversion or things can break. Will someone please MULEize
	this for real?

	* parse.el (lyskom-char-p): New implementation to fix spurious
	protocol errors.
	(lyskom-char-p): Fixed new implementation.

1999-10-25  David Kagedal  <davidk@lysator.liu.se>

	* option-edit.el (lyskom-custom-variables): Reversed logic for
	kom-reading-puts-comments-in-pointers-last.

1999-10-25  David Byers  <davby@ida.liu.se>

	* vars.el.in (lyskom-backtrace-list): New variable.

	* parse.el (lyskom-char-p): Make lyskom-char-p ignore whitespace
	to mimic behavior of lyskom-expect-char and friends.
	(lyskom-protocol-error): Accumulate backtraces.

1999-10-20  David Byers  <davby@ida.liu.se>

	* mship-edit.el (lp--update-membership): When we set the priority
	to under the session priority, remove the conf from the reading
	list, leave it and update the prompt. Take old priority and old
	position as arguments.
	(set-lp--entry-pri-and-pos): New function.
	(lp--yank): Use it.
	(lp--set-priority): Use it.
	(lp--bump-priority): Use it.
	(lp--move-up): Use it.
	(lp--move-down): Use it.

1999-10-19  David Byers  <davby@ida.liu.se>

	* mship-edit.el (lp--toggle-invitation): New function.
	(lp--toggle-passive): New function.
	(lp--toggle-secret): New function.
	(lp--mode-map): Added lp--toggle-invitation, lp--toggle-passive,
	lp--toggle-secret.

	* commands2.el (lyskom-print-summary-line): Test mx-author
	and mx-from to see if we should print the mx-author name.

	* edit-text.el (lyskom-edit-get-commented-author): Test mx-author
	and mx-from to see if we should print the mx-author name.

1999-10-18  David Byers  <davby@ida.liu.se>

	* utilities.el (lyskom-client-date): Off-by-one error in
	day-of-month fixed.

	* edit-text.el (lyskom-edit-get-commented-author): Print the
	name of the real author of an imported e-mail, not the importer's
	name. 

1999-10-17  David Byers  <davby@ida.liu.se>

	* utilities.el (lyskom-client-date-string): Don't add 1900 to
	result of decode-time.

Sun Oct 17 00:52:05 1999  David Byers  <davby@sen2.ida.liu.se>

	* Release av 0.46-BETA-A

1999-10-17  David Byers  <davby@ida.liu.se>

	* commands2.el (kom-postpone): Added RE-EDIT-TEXT read-info type.

	* clienttypes.el (set-read-info->misc): Add misc field to read-info.
	(read-info->misc): Same here.
	(lyskom-create-read-info): Same here.

	* lyskom-rest.el (lyskom-what-to-do): Add support for re-edit text.
	(kom-re-edit-next-text): New function.
	(lyskom-next-command): Add support for re-edit text.
	(lyskom-update-prompt): Add support for re-edit text.

1999-10-16  David Byers  <davby@ida.liu.se>

	* option-edit.el (lyskom-ding-widget): Turned-off is zero, not
	nil to make the per sender option avalable in Gnu Emacs.

	* swedish-strings.el (lyskom-custom-strings): Fixed speling eror.

1999-10-15  David Byers  <davby@ida.liu.se>

	* swedish-strings.el (lyskom-sv-mode-map): Bind aring and
	adiaeresis.

1999-10-15  David Byers  <davby@ida.liu.se>

	* utilities.el (lyskom-client-date-string): Print year correctly.

	* view-text.el (lyskom-print-text): Correct formatting of missing
	person. 
	(lyskom-print-text): Format author in text footer correctly even
	if deferred printing is off.
	(lyskom-print-text): Don't do deferred printing of the footer
	unless it's really necessary. Don't block to get the author for
	the footer unless it's necessary.

1999-10-14  David Byers  <davby@ida.liu.se>

	* view-text.el (lyskom-view-text): Don't set first-line-face on
	the imported header lines.

Thu Oct 14 13:57:16 1999  David Byers  <davby@sen2.ida.liu.se>

	* Release av 0.46-BETA-9

1999-10-14  David Byers  <davby@ida.liu.se>

	* option-edit.el (kom-customize): Use lyskom-copy-face.

	* utilities.el (lyskom-copy-face): New function.
	(lyskom-set-face-scheme): Use it.

	* english-strings.el, swedish-strings.el, vars.el.in: Removed
	variable lyskom-text-start.

	* lyskom-rest.el (backward-text): Implement using
	lyskom-prev-area. 
	(forward-text): Implement using lyskom-next-area.
	(lyskom-text-at-point): Implement using lyskom-prev-area.

	* view-text.el (lyskom-view-text): Insert property
	lyskom-text-start on the number of each newly inserted text.

	* utilities.el (lyskom-prev-area): New function.
	(lyskom-next-area): New function.

	* lyskom-rest.el (kom-prev-prompt): New function.
	(kom-next-prompt): New function.

	* lyskom-buttons.el (kom-previous-link): Implement using
	lyskom-prev-area.
	(kom-next-link): Implement using lyskom-next-area.

	* english-strings.el (lyskom-text-start): Updated to work with
	imported texts.

	* swedish-strings.el (lyskom-text-start): Updated to work with
	imported texts.

	* option-edit.el (lyskom-ansaphone-reply-widget): New widget type.
	(lyskom-customize-buffer-format): Added ansaphone replies.
	(lyskom-custom-variables): Added kom-ansaphone-replies.

1999-10-13  David Byers  <davby@ida.liu.se>

	* Removed all references to kom-emacs-knows-iso-8859-1

	* review.el (kom-review-noconversion): Don't set
	kom-emacs-knows-iso-8859-1 

	* commands2.el (kom-display-who-buffer): Kommenterade ut.

	* option-edit.el (lyskom-ding-widget): Full definition of ding
	widget.
	(lyskom-create-widget): Don't insert doc button if doc string is
	empty.

1999-10-12  David Byers  <davby@ida.liu.se>

	* edit-text.el (Info-current-file): Get rid of Info-related
	compiler warnings.

	* view-text.el (lyskom-insert-deferred-header-comm): Print the
	content type of attachments.
	(lyskom-insert-header-comm): Same here.

1999-10-13  David Byers  <davby@ida.liu.se>

	* command.el (lyskom-end-of-command): Don't do user-active when
	we're anonymous.

	* swedish-strings.el, english-strings.el (kom-tell-phrases): Tog
	bort kom-tell-is-anonymous

	* language.el (lyskom-tell-string): Print the missing tell key.

	* cache.el (lyskom-tell-server): Don't tell server if we're
	anonymous.

	* commands2.el (kom-become-anonymous): Ny funktion.
	(kom-become-nonanonymous): Ny funktion.

	* lyskom-rest.el (lyskom-format-prompt): Make %a work in prompt
	formats.

	* completing-read.el (lyskom-read-conf-internal): Don't try to get 
	completion for all confs.

	* view-text.el (lyskom-view-text): Use lyskom-mx-date-to-time.

	* komtypes.el (lyskom-create-time): Added tzhr and tzmin to time.

	* view-text.el (lyskom-mx-date-to-time): New function.
	(lyskom-view-text): Handle missing cal-iso.

1999-10-11  David Byers  <davby@ida.liu.se>

	Replaced all uses of current-time-string with lyskom-client-date
	* async.el (lyskom-format-as-personal-message): Print localized
	form of date in async messages.

	* utilities.el (lyskom-client-date): New function.

	* ansaphone.el (kom-toggle-auto-reply): Use
	lyskom-client-date-string instead of current-time-string.
	(lyskom-ansaphone-record-message): Same here.

	* remote-control.el (lyskom-remote-set-message): Use
	lyskom-client-date-string instead of current-time-string.
	(lyskom-remote-handler): Same here.
	(lyskom-remote-autoreply): Same here.
	(lyskom-remote-list-messages-1): Same here.

	* option-edit.el: Added several missing variables to widget
	definitions and buffer format.

	* english-strings.el: Added customize strings.
	
	* swedish-strings.el: Added customize strings.

1999-10-10  David Byers  <davby@ida.liu.se>

	* lyskom-rest.el (kom-save-text): Use def-kom-command.
	(kom-save-text-body): New command.

	* vars.el.in (kom-show-imported-envelope-sender): New variable.
	(kom-show-imported-importer): New variable.
	(kom-show-imported-external-recipients): New variable.

	* view-text.el (lyskom-deferred-insert-footer): Always set the
	name variable so that the footer will have the right number of
	dashes.
	(lyskom-view-text): Only show importer, external recipients and
	envelope sender if the user wants to.

Sat Oct  9 18:54:16 1999  David Byers  <davby@sen2.ida.liu.se>

	* Release av 0.46-BETA-8

1999-10-07  David Byers  <davby@ida.liu.se>

	* async.el (lyskom-format-as-personal-message): Show date if
	kom-show-personal-message-date is non-nil.

	* vars.el.in (kom-show-personal-message-date): New variable.

1999-09-28  David Byers  <davby@ida.liu.se>

	* compatibility.el (last): Added compatibility definition.

1999-10-09  David Byers  <davby@ida.liu.se>

	* swedish-strings.el (lyskom-command): Updated translation of mail 
	header.

	* view-text.el: Updated all functions to format imported e-mail
	properly

1999-09-29  David Byers  <davby@ida.liu.se>

	* edit-text.el (kom-insert-last-info-nodename): New command.
	(kom-yank-info-nodename): New command.

1999-08-28  David Byers  <davby@ida.liu.se>

	* completing-read.el (lyskom-read-session-resolve-ambiguity): Bug
	fix in printing session list.

Tue Sep 28 14:56:43 1999  David Byers  <davby@sen2.ida.liu.se>

	* Released 0.46-BETA-7

1999-08-25  David Byers  <davby@ida.liu.se>

	* edit-text.el (lyskom-edit-send-check-recipients): When checking
	commented author, actually check all the recipients, not just the
	first one.

	* reading.el (lyskom-sort-to-do-list): New function.
	(lyskom-read-info-<): New function.

	* lyskom-rest.el (lyskom-set-mode-line): Compute total-unread even 
	if we are not in any conference.

	* commands2.el (lyskom-next-kom): Removed references to
	lyskom-buffer-list. 

1999-08-24  David Byers  <davby@ida.liu.se>

	* reading.el (lyskom-update-membership-positions): New function.

	* utilities.el (lyskom-move-in-list): New function.

	* reading.el (lyskom-sort-membership): Set the position of
	elements in the list and sort the to-do-list after sorting the
	membership list.

	* lyskom-rest.el (lyskom-leave-current-conf): New function.

	* commands1.el (lyskom-sub-member): Use lyskom-leave-current-conf.

	* async.el (lyskom-async-forced-leave-conf): Use
	lyskom-leave-current-conf.
	(lyskom-async-new-membership): Same here.

1999-08-23  David Byers  <davby@ida.liu.se>

	* slow.el (kom-expand-slow-command): Test for exact matches if
	optional TRY-EXACT is non-nil.

	* lyskom-rest.el (lyskom-format-aux): Typo fix.

	* language.el (lyskom-tell-string): Return the empty string if the 
	key we're looking for is not in kom-tell-phrases.

1999-08-22  David Byers  <davby@ida.liu.se>

	* mship-edit.el (lp--create-buffer): Sort the membership list
	before creating the buffer.
	(lp--toggle-entry-expansion): New function.

	* reading.el (lyskom-insert-membership): Use
	lyskom-sort-membership.
	(lyskom-sort-membership): New function.
	(lyskom-insert-memberships-in-membership): Use it.

	* mship-edit.el (lp--previous-entry): New function.
	(lp--next-entry): New function.
	(lp--first-entry): New function.
	(lp--last-entry): New function.
	(lp--goto-priority): New function.
	(lp--update-membership): New function.
	(lp--set-priority): Made this function work.

	* commands2.el (kom-set-unread): Fixed bug when not in any
	conference.

Mon Aug 23 13:03:27 1999  David Byers  <davby@sen2.ida.liu.se>

	* Released 0.46-BETA-6

1999-08-23  David Byers  <davby@ida.liu.se>

	* english-strings.el: Changed all "article" to "text". Synched
	with Swedish strings.

	* startup.el: Set the process coding system of the network stream
	to iso-8859-1 to avoid stupidities like Gnu Emacs sending its
	internal representation of swedish characters to the server (and
	lying about the length of the string in question.)

	* compatibility.el (set-process-coding-system): New compatibility
	function.

1999-08-19  David Byers  <davby@ida.liu.se>

	* commands2.el (kom-change-conf-type): Fixed bug in call to
	mapconcat.

1999-08-18  David Byers  <davby@ida.liu.se>

	* prefetch.el (lyskom-prefetch-cancel-prefetch-map): New function.
	(lyskom-skip-finished-in-queue): Handle CANCELED elements
	(lyskom-prefetch-one-item): Handle CANCELED elements

	* reading.el (lyskom-enter-map-in-to-do-list): Don't bug out if we 
	get a map for a conference we're not a member of. This can happen
	when there are RPC calls pending and we do something to the
	membership list (a refetch, leave a conference, etc.)

1999-08-22  David Byers  <davby@ida.liu.se>

	* edit-text.el (lyskom-edit-send-check-recipients): Check for
	duplicate recipients and no recipients.

	* swedish-strings.el (lyskom-sv-edit-mode-map): Add binding for kom-edit-add-bcc.

	* edit-text.el (lyskom-edit-find-misc): New function.
	(lyskom-edit-move-recipients): Only add recipients when necessary.
	Convert existing ones if possible. Add recipients after comment-to 
	headers.

	* utilities.el (lyskom-insert-in-list): New function.

	* edit-text.el (lyskom-edit-do-add-recipient/copy): New function.
	(lyskom-edit-add-recipient/copy): Removed string argument. Use
	lyskom-edit-do-add-recipient/copy.

	* english-strings.el: Change "note on the door" to "notice"
	everywhere.

	* edit-text.el (lyskom-edit-move-recipients): Use only
	lyskom-edit-replace-headers to replace the headers.

	* commands2.el (kom-next-unread-kom): New implementation.
	(kom-previous-kom): New implementation.
	(kom-next-kom): New implementation.
	(lyskom-next-kom): New implementation replaces lyskom-next-kom and 
	lyskom-previous-kom.

	* komtypes.el (lyskom-member-list-find-member): Fixed bug in
	lyskom-member-list-find-member when member list is empty.

	* commands1.el (kom-send-letter): Remove string from quit
	signalling.
	(lyskom-comment-recipients): Same here.

	* lyskom-rest.el (silent-read): Use read-char-exclusive. 
	(j-or-n-p): Same here.
	(lyskom-ja-or-nej-p): Remove string from quit signalling.
	(lyskom-j-or-n-p): Same here.

1999-08-21  David Byers  <davby@ida.liu.se>

	* commands2.el (kom-add-private-answer): New function.
	(kom-add-request-confirm): New function.

	* aux-items.el (lyskom-match-aux-items): New function.

	* lyskom-rest.el (j-or-n-p): Allow a symbol for the prompt.

	* commands2.el (kom-add-no-comments): New command.

1999-08-14  David Byers  <davby@ida.liu.se>

	* vars.el.in (kom-show-week-number): New variable.

	* commands1.el (kom-display-time): If calendar and cal-iso are
	available we can show the week number.

1999-08-13  David Byers  <davby@ida.liu.se>

	* commands1.el (lyskom-try-add-member): Added optional message
	string. 
	(kom-change-priority): New user-level command.
	(kom-add-self): Don't ask about priority when reentering a
	conference we are passive members of.

	* vars.el.in (lyskom-err-stat): New variable.

	* parse.el (lyskom-parse-error): Set lyskom-err-stat from parsed
	error.

	* view-text.el (lyskom-follow-comments): Enter REVIEW-TREE into
	both lyskom-reading-list and lyskom-to-do-list using
	lyskom-review-enter-read-info.

1999-08-09  David Byers  <davby@ida.liu.se>

	* edit-text.el (lyskom-create-text-handler): Changed name of
 	parameter never-mark-as-read to is-anonymous.
	(lyskom-edit-send): Ditto and don't set creating-software if
 	sending anonymously.

	* vars.el.in (kom-show-creating-software): New variable.

	* aux-items.el (lyskom-print-creating-software): Show creating
	software only when kom-show-creating-software is non-nil.

1999-07-14  David Kågedal  <davidk@lysator.liu.se>

	* aux-items.el (lyskom-print-creating-software): Typo fix.
	* edit-text.el (lyskom-edit-send): Set creating-software aux-item.

1999-07-12  Per Cederqvist  <ceder@signum.se>

	* completing-read.el (lyskom-read-session-resolve-ambiguity): Use
	'total-users-sans-date instead of 'total-users; we don't pass a
	date to the format.
	* swedish-strings.el (lyskom-message): Define total-users-sans-date.
	* english-strings.el (lyskom-message): Define total-users-sans-date.

1999-07-02  David Byers  <davby@ida.liu.se>

	* english-strings.el (lyskom-en-filter-edit-map): Use kbd. Added
	C-c C-c as command to quit.

	* swedish-strings.el (lyskom-sv-filter-edit-map): Same here.

1999-06-30  Per Cederqvist  <ceder@signum.se>

	* swedish-strings.el, english-strings.el (lyskom-message): Added
	missing %-signs in review-many-comments and view-many-comments.

1999-06-29  David Byers  <davby@ida.liu.se>

	* vars.el.in (lyskom-face-schemes): Added kom-warning-face.
	(lyskom-faces): Ditto.

	* view-text.el (lyskom-format-text-footer): Add the ability to
	have properties on the format flags.

	* async.el (lyskom-parse-async): Update the uconf-stat cache when
	a name changes.

	* komtypes.el (uconf-stat): Use def-komtype.
	(uconf-stat): 

	* messages.el (lyskom-filter-message-handler): New message handler
 	used to filter ignored messages.

	* vars.el.in (kom-ignore-message-senders): New variable.
	(kom-ignore-message-recipients): New variable.

1999-06-29  David Byers  <davby@ida.liu.se>

	* edit-text.el (lyskom-edit-send-check-recipients): Passive
	members should be added as direct recipients.
	(lyskom-edit-send-check-recipients): Add each author only once.
	Don't barf if the comment has been deleted.

1999-06-28  David Byers  <davby@ida.liu.se>

	Get rid of compiler warnings
	* lyskom-rest.el (w3-finish-drawing): Get rid of warning.
	
	* compatibility.el (lyskom-xemacs-or-gnu): Evaluate the test at
	compile time. The byte code is not compatible anyway.

	* macros.el (define-widget): Autoload widget functions if
	undefined.

	* utilities.el (lyskom-ignore): New function.

	* review.el (kom-review-noconversion): Use lyskom-ignore instead
 	of ignore to get rid of warnings.

	* option-edit.el (lyskom-create-widget): Use lyskom-ignore instead 
	of ignore to get rid of warnings.

	* menus.el (lyskom-define-menu-xemacs): Use lyskom-ignore instead
	of ignore to get rid of warnings.

	* edit-text.el (kom-ispell-message): Use lyskom-ignore to get rid
	of bound but not referenced error.
	(lyskom-edit-send-check-recipients): Use lyskom-ignore instead of
	ignore. 
	(kom-edit-add-comment): Use lyskom-ignore to get rid of bound but
	not referenced error.

	* commands2.el (kom-set-unread): Use lyskom-ignore to get rid of
	bound but not referenced warning.

	* edit-text.el (kom-edit-add-comment): Got rid of compiler
	warning.

	* commands2.el (resize-minibuffer-mode): Got rid of compiler
	warning.

	* startup.el (lyskom-accept-async): Got rid of compiler warning.

	* prefetch.el (lyskom-prefetch-membership-handler): Got rid of
	compiler warning.

	* aux-items.el (lyskom-maybe-add-face-to-string): Got rid of
	compiler warning.

	Treat reviewing as a conference in the read list
	* lyskom-rest.el (kom-view-next-text): Delete reviewed texts from
	lyskom-to-do-list.
	(lyskom-go-to-next-conf): Update read lists when resuming review.
	(lyskom-update-prompt): Update prompt for resuming review.

	* review.el (lyskom-review-get-priority): New function.
	(kom-review-tree): Use review priority if available.
	(lyskom-review-tree): Ditto.
	(kom-review-more): Enter review into lyskom-to-do-list.
	(lyskom-review-by-to): Ditto.
	(kom-find-root): Ditto.
	(lyskom-review-comments): Ditto.
	(kom-review-last-normally-read): Ditto.

	* vars.el.in (kom-review-priority): New variable.

1999-06-28  David Byers  <davby@ida.liu.se>

	* vars.el.in (kom-silent-ansaphone): New variable.

	* lyskom-rest.el (lyskom-beep): Allow alist argument. 

Mon Jun 28 17:15:28 1999  David Byers  <davby@sen2.ida.liu.se>

	* Release 0.46-BETA-5

1999-06-28  David Byers  <davby@ida.liu.se>

	* lyskom-rest.el (lyskom-set-mode-line): Don't show session
	priority in mode line if it is the same as the default session
	priority.

	* commands2.el (kom-set-session-priority): Default priority is
	kom-default-session-priority, not 100.

	* startup.el (kom-start-anew): Set the session priority from
	kom-default-session-priority.

	* vars.el.in (kom-default-session-priority): New variable.

	* commands2.el (lyskom-send-message-trim-newlines): Don't trim
	newlines if the message is not a string.

1999-06-27  David Byers  <davby@ida.liu.se>

	* services.el (initiate-set-membership-type): Don't delete the
	conference and person from the cache.

	* startup.el (lyskom-refetch): Stop the prefetch while loading it
	with stuff to do. Otherwise we'll get things in the wrong order.

	* commands1.el (lyskom-try-add-member): Ask for priority when
	adding new members.

1999-06-26  David Byers  <davby@ida.liu.se>

	*  Release 0.46-EBTA-4

	* prefetch.el, startup.el, async.el: Use get-unread-confs to get
	memberships in confs with unreads before 

	* view-text.el (lyskom-print-text): Moved printing of the newline
	after a text to the text body (that way smileys at the end of a
	text are done correctly.)

	* prioritize.el (lyskom-prioritize-tell-server): Ignore new
	membership asyncs.

1999-06-25  David Byers  <davby@ida.liu.se>

	* lyskom-rest.el (lyskom-visible-membership): Deal with passive
	memberships the way they're supposed to be dealt with.

	* reading.el (lyskom-add-memberships-to-membership): Don't add
	passive memberships.

	* review.el (kom-review-stack): Print information about all kinds
	of things on the stack, not just review commands.

	* completing-read.el (lyskom-completing-strip-name): New function.
	(lyskom-completing-member): Ignore parens.

	* lyskom-rest.el: lyskom-format has capability to use embedded
	predicates. Wohoo!

	* utilities.el (lyskom-client-date-string): New function.

	* lyskom-rest.el (lyskom-current-text): New function.

1999-06-24  David Byers  <davby@ida.liu.se>

	* lyskom-rest.el (lyskom-insert-string): Allow literal strings in
	calls to lyskom-insert-string.

1999-06-23  David Byers  <davby@ida.liu.se>

	* english-strings.el: Synched up with Swedish.

	* vars.el.in (lyskom-language): Set default valie from
	kom-default-language. 

1999-06-22  David Byers  <davby@ida.liu.se>

	* view-text.el (lyskom-print-text): Print correct header for texts 
	without subjects too.

	Support long dashed lines in a variety of places.
	* language.el (lyskom-get-string-sol): New function.

	* vars.el.in (kom-text-header-dash-length): New variable.
	(kom-text-footer-dash-length): New variable.
	(kom-long-lines): New variable.

	* view-text.el (lyskom-format-text-footer): Use
 	kom-text-footer-dash-length to specify total footer size.
	(lyskom-print-text): Use kom-text-header-dash-length to specify
 	total length of dashed line before text.
	(lyskom-format-text-footer): Print the format-flags string as part
 	of the dashed lines, not after the dashed line.


Tue Jun 22 15:59:15 1999  David Byers  <davby@sen2.ida.liu.se>

	* Release av 0.46-BETA-3

1999-06-22  David Byers  <davby@ida.liu.se>
	
	Add/remove footnotes
	* commands1.el (kom-sub-footnote): New function.
	(lyskom-add-sub-footnote): New function.
	(kom-add-footnote): New function.

1999-06-21  David Byers  <davby@ida.liu.se>

	* commands1.el (lyskom-sub-member): Become passive member the
	first unsubscribe and really unsubscribe on the second try.

	Better handling of membership types.
	* lyskom-rest.el (lyskom-check-go-to-conf): New function to check
	if it is OK to go to a conference. Offer to activate passive
	memberships. Offer to accept invitations. Warn about secret
	memberships.

1999-06-20  David Byers  <davby@anton9.ida.liu.se>

	* Release av 0.46-BETA-1

1999-06-19  David Byers  <davby@ida.liu.se>

	* completing-read.el (lyskom-read-conf-stat): Don't croak if we
	get an uconf-stat back from lyskom-read-conf.

1999-06-17  David Byers  <davby@ida.liu.se>

	* utilities.el (lyskom-maxint): Clip to 32 bit integers.

1999-06-17  David Byers  <davby@ida.liu.se>

	* feature.el (lyskom-define-feature): Inherit feature variables
	into the minibuffer.

	* completing-read.el (lyskom-completing-who-is-on): Use dynamic
	session info when it should be used.

1999-06-15  David Byers  <davby@ida.liu.se>

	* lyskom-rest.el (lyskom-format-aux-help): Handle actual character 
	arguments for ?c.

	* compatibility.el (int-to-char): Provide compatibility for
	int-to-char.

1999-06-14  David Byers  <davby@ida.liu.se>

	* lyskom-buttons.el (lyskom-default-button): Handle uconf-stats.

	* lyskom-rest.el (lyskom-format-aux-help): Use uconf-stats instead 
	of conf-stats. Do not permit alternate names. Do not attempt to
	format the xface property.

	* parse.el (lyskom-parse-error): Removed message "bug i
	lyskom-parse-error" since this would happen frequently when error
	messages are sent to a client that has been restarted.

	Handle new recipient async message
	* async.el (lyskom-default-new-recipient-hook): New function.
	(lyskom-async-new-recipient): New function.
	(lyskom-parse-async): Handle new recipient message.

	* view-text.el (lyskom-text-read-at-least-once-p): New optional
	argument BG.

1999-06-13  David Byers  <davby@ida.liu.se>

	* commands2.el (kom-del-faq): New function.
	(kom-add-faq): New function.
	(kom-status-conf): Print aux items.
	(kom-status-person): Print aux items.

	* view-text.el (lyskom-view-text): Use text-print-when to contol
	printing of aux-items.

	* lyskom-rest.el (lyskom-read-number): Accept symbol for prompt.

1999-06-12  David Byers  <davby@ida.liu.se>

	* commands1.el (lyskom-who-is-on-check-membership-9): Don't
	extract pers-nos from member list.
	(lyskom-who-is-on-check-membership-8): Same here.

	Speed up parsing:
	* parse.el (lyskom-parse-string): Reset lyskom-string-bytes-missing after
	successful parse. Set lyskom-string-bytes-missing in the lyskom
	buffer, not the parse buffer.
	(lyskom-parse-unparsed): Do not reset lyskom-string-bytes-missing.
	(lyskom-init-parse): Reset lyskom-string-bytes-missing.

1999-04-01  David Byers  <davby@ida.liu.se>

	* vars.el.in (kom-postpone-default): Ny variabel.

	* commands2.el (kom-postpone): Defaultvärdet inte hårdkodat
	längre.

1999-06-11  David Byers  <davby@ida.liu.se>

	* edit-text.el (lyskom-edit-insert-miscs): Fix parameter list for
	lyskom-aux-item-definition-call (edit-insert print).

	* swedish-strings.el (lyskom-message): Fix wording in xref-type.

	* compatibility.el (kbd): Redefine kbd if it seems to be
	misbehaving.

1999-01-16  David Byers  <davby@ida.liu.se>

	* lyskom-rest.el (j-or-n-p): Don't compare character to int. It's
	not kosher in MULE.

1999-01-11  David Byers  <davby@ida.liu.se>

	* edit-text.el (lyskom-create-text-handler): Fixed bug that
	prevented texts from being read automatically.

1999-01-10  David Byers  <davby@ida.liu.se>

	* services.el (initiate-query-read-texts): Parse membership
	position too.

	* parse.el (lyskom-parse-membership-and-position): New function.

	* review.el (lyskom-get-texts-by-generic): Ta inte med user-arean
	i resultatet.

	* command.el (lyskom-start-of-command): Don't rely on lyskom-proc
	being nil if a session is dead.

	* commands1.el (lyskom-quit): Sätt inte lyskom-proc till nil. Då
	fungerar inte lyskom-buffer-p. (Fast frågan är vad som går sönder
	istället...)

	* parse.el (lyskom-parse-text-mapping): Ny funktion.
	(lyskom-parse-list): Ny funktion.
	(lyskom-parse-text-number-pair): Ny funktion.
	(lyskom-parse-sparse-map): Ny funktion.
	(lyskom-parse-text-mapping): Ny funktion.

	* services.el (initiate-get-session-info-ident): Ny funktion.
	(initiate-re-lookup-person): Ny funktion.
	(initiate-lookup-person): Ny funktion.
	(initiate-lookup-conf): Ny funktion.
	(initiate-set-info): Ny funktion.
	(initiate-local-to-global): Ny funktion.
	(initiate-map-created-texts): Ny funktion.

	* komtypes.el (session-info): Lade till fält från who-info-ident

	* parse.el (lyskom-parse-who-info-ident-list): Lade till parsning
	av who-info-ident.
	(lyskom-parse-session-info-ident): Ny funktion.
	(lyskom-parse-session-info): Hantera nya fält i session-info.

	* services.el (initiate-who-is-on-ident): Ny funktion.

	* komtypes.el (who-info): Lade in fälten från who-info-ident.

	* lyskom-rest.el (lyskom-format-object): Add ability to format
	time.
	(lyskom-format-objects): Använd mapconcat istället för concat,
	apply och mapcar.
	(lyskom-format-object): Stoppa inte in space före objektet.
	lyskom-format-objects tar hand om det.
	Bytte namn på lyskom-format-X till lyskom-prot-a-format-X för att
	undvika namnkrockar i framtiden.
	(lyskom-prot-a-format-string): Allt i en format-sats.

	* services.el (initiate-get-last-text): New function.

1999-01-09  David Byers  <davby@ida.liu.se>

	* services.el (initiate-login): Swap initiate-login and
	initiate-login-new.
	(initiate-mark-text): Folded initiate-mark-text-old into
	initiate-mark-text.
	(initiate-unmark-text): Do (mark-text text-no 0) if call 73 is not 
	implemented.

1999-01-06  David Byers  <davby@ida.liu.se>

	* internal.el: Don't concat an integer.

1999-01-02  David Byers  <davby@ida.liu.se>

	* utilities.el: Sätt lyskom-max-int efter lyskom-maxint har
	definierats.

1999-05-05  Per Cederqvist  <ceder@signum.se>

	* commands1.el (kom-change-parenthesis): Nytt kommando.

	* vars.el.in (lyskom-commands): La till kom-change-parenthesis.

	* swedish-strings.el, english-strings.el (lyskom-message): La till
	new-paren och no-paren-in-name.
	(lyskom-command): La till kom-change-parenthesis.

Thu Feb 18 17:17:42 1999  Peter Liljenberg  <petli@lysator.liu.se>

	* commands1.el (lyskom-who-is-on-9):
	(lyskom-insert-deferred-session-info-since): Vilkalistan kan visa
 	när en session kopplade upp sig och hur länge den har varit
 	inaktiv.
	
	* vars.el.in (kom-show-since-and-when):
	* english-strings.el:
	* swedish-strings.el:
	* option-edit.el: Konfigurera ovanstående beteende.

1999-01-09  David Byers  <davby@ida.liu.se>

	* commands2.el (kom-where-is): Nytt kommando.

1999-01-04  David Byers  <davby@ida.liu.se>

	* edit-text.el (lyskom-edit-extract-text): Gör inte
	re-search-forward för att hitta separatorn. Det är fel om man har
	regexp-magiska tecken i strängen.

1999-01-01  Per Cederqvist  <ceder@lysator.liu.se>

	* parse.el (lyskom-skip-array): Glöm inte att skippa det
	avslutande }-tecknet i arrayen.
	* flags.el (lyskom-read-options-eval): Krascha inte om det finns
	mer än en del i user-arean från en annan klient.

1998-12-14  David Byers  <davby@ida.liu.se>

	* lyskom-rest.el (lyskom-beep): Häng inte om kom-audio-player
	pekar ut ett program som inte finns. 

Mon Sep 14 19:54:03 1998  David Kagedal  <davidk@lysator.liu.se>

	* prioritize.el (kom-prioritize): Gör
 	(lyskom-wait-for-membership).

Mon Oct 12 19:45:52 1998  Peter Liljenberg  <petli@lysator.liu.se>

	* lyskom-rest.el (kom-view-next-text): Sätter flat-review till t
	om texten är en återsedd kommenter eller en markerad text.

	* commands1.el (lyskom-view-commented-text): Sätter
	flat-review-argumentet till t.

	* vars.el.in (kom-truncate-threshold, kom-truncate-show-lines):
	Nya variabler.

	* option-edit.el: Konfigurera ovanstående variabler.
	
	* english-strings.el (lyskom-message): 
	  swedish-strings.el (lyskom-message): reformat-* ändrade.

	* lyskom-rest.el (lyskom-signal-reformatted-text): Bygger en lista
	av formatteringsmetoderna istället för att bara sätta en symbol.

	* view-text.el (lyskom-format-text-footer): format-flags (och
	därmed lyskom-last-text-format-flags) är nu en lista av symboler i
	lyskom-messages, som formatteras till en parantes med komman
	emellan strängarna.
	
	(lyskom-view-text, lyskom-print-text): Nytt argument (flat-review)
	som är t när man återser en kommentar eller en markerad text.
	Används för att trunkera inlägg om användaren så önskar.

1998-08-16  David Byers  <davby@ida.liu.se>

	* edit-text.el (kom-edit-send lyskom-edit-send
	lyskom-create-text-handler): Markera inte den nya texten som läst
	om man skickar in den anonymt.

1998-08-13  David Byers  <davby@ida.liu.se>

	* language.el (lyskom-tell-string): Flyttade hit från lyskom-rest.el

	* lyskom-rest.el (lyskom-format-prompt): Hantera %A och %a

	* vars.el.in: Ny variabel kom-anonymous-prompt-format,
	kom-anonymous-prompt-format-executing 

	* edit-text.el (kom-edit-send): Skicka kanske in texten 
	anonymt om lyskom-is-anonymous är satt

	* vars.el.in: Lade till lyskom-is-anonymous

	* cache.el (lyskom-tell-server): Testa lyskom-is-anonymous

	* swedish-strings.el (kom-tell-phrases): Lade till
	kom-tell-is-anonymous 

Thu Jul 30 18:36:10 1998  Peter Liljenberg  <petli@lysator.liu.se>

	* lyskom-buttons.el (lyskom-keyboard-menu): Rensa echo-arean innan
	kommandot körs.
	
Thu Jul 23 15:03:10 1998  Peter Liljenberg  <petli@lysator.liu.se>

	* commands1.el (lyskom-who-is-on-check-membership-9):
	(lyskom-who-is-on-check-membership-8): Använde fel datatyp.

	* lyskom-buttons.el (lyskom-keyboard-menu):
	(lyskom-button-menu):
	(kom-menu-button-press): Skrev kom-menu-button-press som
 	komplement till kom-button-press.

	* view-mode.el (lyskom-view-mode-map): Se ovan.

	* english-strings.el (lyskom-en-edit-mode-map): 
	(lyskom-en-mode-map): 
	(lyskom-en-prioritize-mode-map): Se ovan.

	* swedish-strings.el (lyskom-sv-mode-map):
	(lyskom-sv-prioritize-mode-map): 
	(lyskom-sv-edit-mode-map): Se ovan.


Thu Jul 16 12:57:57 1998  David Kågedal  <davidk@lysator.liu.se>

	* lyskom-rest.el (kom-recover): Anropar clear-all-caches när man
	anropar med prefixargument.

Wed Jul  8 13:12:48 1998  David Kagedal  <davidk@lysator.liu.se>

	* startup.el (lyskom): Den frågade inte om man ville fortsätta med
	en gammal session om man försökte starta en ny mot samma server.

Fri Jul  3 13:52:46 1998  David Kagedal  <davidk@lysator.liu.se>

	* startup.el (lyskom-mode): Stavfel i dokumentationen.

1998-06-14  David Byers  <davby@ida.liu.se>

	* completing-read.el (lyskom-read-conf-expand-specials): Använd
	uconf-stat istf conf-stat.
	(lyskom-read-conf-no): Använd uconf-stat vid behov.
	(lyskom-read-uconf-stat): Ny funktion.
	(lyskom-read-conf-name): Använd uconf-stat vid behov.
	(lyskom-read-session-resolve-ambiguity): Använd uconf-stat.

	* cache.el (cache-get-uconf-stat): Bygg en uconf-stat bara om vi
	kör protokollversion 10.

	* commands1.el (kom-create-conf): Fråga om man tillåter hemliga
	medlemmar. 

	* commands2.el (kom-status-conf): Skriv ut om hemliga medlemmar
	och anonyma texter är tillåtna.
	(kom-status-conf): Använd uconf-stat för mötestypen. Annars blir
	det fel.
	(kom-change-conf-type): Fråga om man tillåter hemliga medlemmar.
	Använd genomgående uconf-stat.

	* macros.el (lyskom-traverse-break): Nytt makro.
	(lyskom-traverse): Definiera om med backquote och gör det möjligt
	att returnera ett resultat.

	* commands1.el (lyskom-who-is-on-check-membership-9): Använd
	member-list-funktioner istället för conf-no-list.
	(lyskom-who-is-on-check-membership-8): Dito.

	* komtypes.el (lyskom-member-list-find-member): Ny funktion.

	* commands2.el (kom-status-conf): Byt member->conf-no till
	member->pers-no.

	* parse.el (lyskom-parse-conf-no-list): Ny funktion.

	* komtypes.el (lyskom-create-conf-no-list): Fixade buggen.

1998-06-10  David Byers  <davby@ida.liu.se>

	* utilities.el (lyskom-current-time): Ny funktion.
	
	* startup.el (lyskom): Använd den

1998-06-08  David Byers  <davby@ida.liu.se>

	* services.el (initiate-set-membership-type): Ny funktion. Whee!

	* parse.el: Lade till parsning av created-at i
	lyskom-parse-membership och lyskom-parse-member

	* komtypes.el: Lade till created-at i membership och member.

Tue Jun  2 11:49:27 1998  David Byers  <davby@ida.liu.se>

	* Lade in -*-coding: raw-text;-*- i alla filer.

	* lyskom-rest.el (silent-read): Tog bort sättning av
	enable-multibyte-characters.

	* buffers.el: Använd set-buffer-multibyte.

	* defvar.el (kom-dont-read-saved-variables): Tog bort defvar av
	enable-multibyte-characters 

	* defvar.el (lyskom-setup-minibuffer-variables): Använd
	set-buffer-multibyte.

	* compatibility.el (set-buffer-multibyte): Ny
	kompatibilitetsdefinition. 

	* swedish-strings.el, english-strings.el (lyskom-message): Ändrade 
	på strängen old-passwd.

Mon Jun  1 13:34:31 1998  David Byers  <davby@ida.liu.se>

	* startup.el (lyskom): Använd lyskom-buffer-p för att testa om man 
	skall fråga om bufferten skall återanvändas. Det gör att man
	enbart får frågan om bufferten finns och det finns en levande
	uppkoppling i den.

	* startup.el (lyskom): Skicka t i may-be-dead till lyskom-buffer-p 
	så att en stängd lyskom-buffert återanvänds korrekt.
	
	* commands2.el (lyskom-buffer-p): Lade till optional argument
	may-be-dead.

Wed May 27 16:30:47 1998  David Byers  <davby@ida.liu.se>

	* completing-read.el (lyskom-complete-string): Lade till nreverse
	igen.
	* vars.el.in (lyskom-ok-to-send-new-calls): Lade till
	lyskom-ok-to-send-new-calls
	* services.el (blocking-return): Tog bort
 	lyskom-ok-to-send-new-calls.
	* vars.el.in (kom-mail-address): user-full-name är en funktion,
	inte en variabel.

Wed May  6 17:45:57 1998  Peter Liljenberg  <petli@lysator.liu.se>

	* swedish-strings.el, english-strings.el, commands1.el:
	Nytt kommando: Vilka är inloggade i möte.

Thu Mar 12 19:51:06 1998  David Kagedal  <davidk@lysator.liu.se>

	* menus.el (lyskom-do-popup-menu): Tog bort ett extra nreverse.

Mon Feb 23 22:41:38 1998  David Kågedal  <davidk@lysator.liu.se>

	* vars.el.in (lyskom-face-schemes): Det stod fel i kom-mark-face i
	ett par scheman.

Sun Feb 22 11:37:57 1998  David Kågedal  <davidk@lysator.liu.se>

	* startup.el (lyskom): Sätt lyskom-server-port.
	
Wed Feb 18 18:51:28 1998  Peter Liljenberg  <petli@lysator.liu.se>

	* edit-text.el (lyskom-edit-mode): Sätter comment-start och
	comment-end så man kan använda comment-region för att citatmarkera
	text.
	
1998-01-31  David Byers  <davby@ida.liu.se>

	* startup.el (lyskom): Testa att både namn och portnummer stämmer
	överens när man testar om det redan finns en session.

	* vars.el.in (lyskom-server-port): Ny variabel.

1998-01-14  David Byers  <davby@ida.liu.se>

	* lyskom-rest.el (lyskom-fill-region): Fixade en
 	omformatteringsbug.
	(kom-next-command): Stöd markering av scrollrader å sånt i XEmacs
	också. 

Tue Jan  6 06:12:39 1998  David Kågedal  <davidk@lysator.liu.se>

	* services.el (lyskom-wait-queue): Här skulle man visst också
 	återställa lyskom-ok-to-send-new-calls.

Sun Jan  4 01:42:08 1998  David Kågedal  <davidk@lysator.liu.se>

	* parse.el (lyskom-expect-char): Använd char-to-string.
	(lyskom-parse-misc-info-list): Dito.
	
	* services.el (lyskom-blocking-do-multiple): Använd
	lyskom-ok-to-send-new-calls här också.

	* startup.el (kom-start-anew): Sätt aldrig lyskom-pers-no till
	nil. Sätt lyskom-inhibit-prefetch till t tillfälligt.

	* services.el (lyskom-ok-to-send-new-calls): Ny variabel
	(blocking-return,blocking-do): Sätt den.

	* internal.el (lyskom-check-output-queues): Kolla
	lyskom-ok-to-send-new-calls.

	* utilities.el (lyskom-next-apo-timeout): Gjorde om till en defun.
	(lyskom-reset-apo-timeout): Dito.
	(lyskom-accept-process-output): Dito.

	* lyskom-rest.el (options): Satte prioriteten för options till 9.

Sat Jan  3 22:25:51 1998  David Kågedal  <davidk@lysator.liu.se>

	* internal.el (lyskom-halt,lyskom-resume): Använd assq istället
 	för assoc.

Sun Dec 28 15:15:19 1997  David Byers  <dbyers@atp>

	* option-edit.el (lyskom-customize-apply): Fixa
	kom-dont-read-saved-variables. 
	(lyskom-create-widget): Skapa widget som man kan välja om
	variabeln skall sparas i servern eller inte.

	* vars.el.in (kom-url-viewer-preferences): Spara i servern.
	(kom-mosaic-command): Dito.
	(kom-audio-player): Dito.
	(kom-netscape-command): Dito.
	
Thu Dec 25 10:39:23 1997  David Byers  <dbyers@atp>

	* lyskom-buttons.el (lyskom-button-open-email): Använd
	compose-mail om den finns.

	* swedish-strings.el, english-strings.el (lyskom-custom-strings):
 	Lade till strängar för kom-personal-messages-in-window.

	* option-edit.el (lyskom-customize-buffer-format): Lade till
	kom-personal-messages-in-window. 
	(lyskom-custom-variables): Dito.

	* async.el (lyskom-handle-as-personal-message): Om vi skapar
	bufferten för personliga meddelanden, gör den till en
	LysKOM-buffert och sätt den i lyskom-view-mode.

	* vars.el.in (lyskom-text-buttons): Uppdaterad regexp för
	info-referenser från teddy.
	(kom-personal-messages-in-window): Ny variabel.

	* startup.el (lyskom): Använd Tomas Abrahamssons proxy-kod.
	(lyskom-www-proxy-connect-filter): Ny funktion.

	* commands1.el (lyskom-nameday): Fixa så dagar utan namnsdagar
	fungerar bra också.

Tue Dec 16 15:20:49 1997  David Byers  <dbyers@atp>

	* startup.el (kom-start-anew): Flytta lyskom-refetch till efter
	båda blocking-do.

Thu Dec  4 14:57:34 1997  David Byers  <dbyers@atp>

	* async.el (lyskom-show-logged-out-person): Skriv ut server-alias
	när någon loggar ut.
	(lyskom-show-logged-in-person): Dito för inloggning.

	* swedish-strings.el (lyskom-message): Fixade has-entered och
	vänner så man kan skriva ut server-alias.

Sun Nov 30 12:20:49 1997  David Byers  <dbyers@atp>

	* completing-read.el (lyskom-complete-string-advance): Fixade
	buggen.

	* commands1.el (kom-write-text): Använd consp, inte listp.

Fri Nov 28 15:47:23 1997  David Byers  <dbyers@atp>

	* commands2.el (lyskom-print-mark-summary-line): Ny funktion.
	(kom-list-marks): Dito.

	* lyskom-rest.el (lyskom-read-num-range): Klara av att returnera
	nil om man vill. Lade till argumentet HISTORY.
	(lyskom-read-number): Dito.

	* swedish-strings.el (lyskom-message): Lade till who-send-text-to.

	* commands1.el (kom-send-letter): Lägg inte till avsändaren som
	mottagare till brev som skickas till ett möte avsändaren är medlem
	i.
	(kom-write-text): C-u i gör att vi frågar efter mottagare. Ett
	numeriskt prefix väljer den avsändaren som mottagare. 

	* utilities.el (lyskom-default-collate-table): Definiera space och
	tab som samma tecken för att undvika oländiga loopar.

	* completing-read.el
	(lyskom-complete-string-advance-to-end-of-word): Hantera space
	lite bättre.
	(lyskom-complete-string-skip-whitespace): Dito.
	(lyskom-complete-string-advance): Dito.

	* lyskom-rest.el (lyskom-wait-for-membership): Loopa så länge
	lyskom lyskom-membership-is-read är en siffra. Den kan vara t och
	almost också, vilket orsakar problem med formatteringen.

	* swedish-strings.el, english-strings.el (lyskom-message): Lade
 	till language-set-to
	(kom-tell-phrases): Använd inte bakslaskade åttabitarstecken.

	* startup.el (kom-start-anew): Flyttade visningen av motd och
	klagomål om presentation till efter man har läst in options.
	Flyttade val av språk till innan man visar motd.

	* vars.el.in (kom-tell-phrases): defvarade kom-tell-phrases igen.

	* filter-edit.el (lyskom-filter-edit-insert-entry): Gör
	lyskom-j-or-n-p quittable.
	(lyskom-filter-edit-quit): Dito.
	(lyskom-filter-edit-save): Dito.
	(lyskom-filter-edit-revert): Dito.

Mon Nov 24 15:55:16 1997  David Byers  <dbyers@atp>

	* commands1.el (kom-delete-text): Avmarkera inlägg som man raderar
	om de är markerade.

	* option-edit.el (lyskom-custom-variables): kom-default-mark kan
	nu vara 0 till 255.

	* commands1.el (lyskom-review-marked-texts): Använd inte 0 som
	markering för att återse alla markerade. Använd nil.
	(kom-review-all-marked-texts): Anpassa därefter.
	(kom-review-marked-texts): Dito.

	* lyskom-buttons.el (lyskom-button-mark-text): Använd nya
	lyskom-mark-text. 
	(lyskom-button-unmark-text): Använd nya lyskom-unmark-text.

	* commands1.el (lyskom-unmark-text): Ny funktion.
	(lyskom-mark-text): Använd nya initiate-mark-text. Hantera inte
	avmarkering. 
	(kom-mark-text): Använd nya lyskom-mark-text.
	(kom-unmark-text): Använd nya lyskom-unmark-text.

	* services.el (initiate-unmark-text): Ny funktion.
	(initiate-mark-text-old): Bytte namn från initiate-mark-text.
	(initiate-mark-text): Ny funktion.

        * swedish-strings.el (lyskom-strings): Lade till strängar för att
	fråga om bekräftelse av radering.
	
	* commands1.el (kom-delete-text): Fråga om man vill radera
	markerade inlägg.
	
	* edit-text.el (lyskom-edit-send-check-recipients): Fråga inte om
	flera mottagare om det bara finns en riktigt mottagare.
	Extrakopiemottagare räknas inte.

Fri Nov 14 09:35:02 1997  David Byers  <dbyers@atp>

	* lyskom-rest.el (kom-next-command): Hajlajta raden med
	lyskom-last-viewed om den inte är i början av fönstret.

	* vars.el.in (lyskom-face-schemes): Lade till kom-mark-face. 
	(lyskom-faces): Dito.

Thu Nov 13 09:37:24 1997  David Byers  <dbyers@atp>

	* edit-text.el (lyskom-edit-send-check-recipients): Kolla att man
	får skriva innan klienten frågar om man vill lägga till
	kommenterad författare som mottagare.

Wed Nov 12 09:03:26 1997  David Byers  <dbyers@atp>

	* review.el (lyskom-get-texts-to): Fixade skrivfel. 

	* distribution-README: Beskriv kompilering från enstaka fil.

	* lyskom-rest.el (lyskom-do-insert): Klara av att en
	speciel-insert-funktion signalerar ett fel.
	(lyskom-format-html): Försök inte formattera som HTML om inte w3
	finns. 

Wed Nov 12 10:29:21 1997  David Kågedal  <davidk@lysator.liu.se>

	* edit-text.el (lyskom-edit-send): När man la till det
	kommenterade inläggets författare som mottagare byggde den
	misc-listan fel.

Mon Oct 27 11:09:35 1997  David Kågedal  <davidk@lysator.liu.se>

	* flags.el (kom-edit-options-send): Fixade parentesfel.
	
	* review.el (lyskom-get-texts-by-and-to): Fixade felskrivning.

Thu Oct 23 14:23:34 1997  David Byers  <davby@ida.liu.se>

	* messages.el (lyskom-info-request-handler): Gjorde så att
 	elispklienten reagerar på INFO igen. ^N och ^O verkade ha
 	försvunnit av någon anledning.

Sun Oct 12 00:39:47 1997  David Byers  <davby@litefix.ida.liu.se>

	* view-text.el (lyskom-print-text): Hantera
 	lyskom-last-text-format-flags som sträng.
	(lyskom-deferred-insert-footer): Dito.

	* parse.el (lyskom-skip-one-token): Skip arrays correctly, please.





Local Variables:
outline-regexp:"M\\|T\\|W\\|F\\|S\\|\t\\\*"
eval: (ispell-change-dictionary "british")
End:
