Att göra i elisp-klienten
=========================

-------- Buggar

prefix-kommandon änndras inte vid språkbyten.

Långsamma kommandon buggar, eftersom bufferten är skrivskyddad.

Dubbla prefetcher kan vara väldigt förvirrande. Om man t.ex. gör
endast i ett möte (säg IÅM) innan det prefetchas får man två
parallella prefetcher på samma möte.

    Om man går till ett möte som inte prefetchats och inte har några
    inlägg blir promten fel, och man får ett felmeddelande.

    Lista nyheter visar fel innan prefetchen har hämtat alla mappar.

Efter återse senaste fick jag fel prompt. Jag vill ha återse
nästa-prompten direkt om det finns texter som matchar villkoret.

    lyskom-read-session-no hanterar inte att man anger specifikt
    sessionsnummer om samma person har flera sessioner, tror jag.
    Problemet är att s xxxx hanteras i lyskom-read-conf-internal som
    bara kan returnera conf-z-info. Man borde låta den returnera info
    om specifikt sessionsnummer också.

    kom-review-tree måste nog skrivas om så den inte är så förbaskat
    rekursiv. Man överskrider ibland max-specpdl-size eller något
    sådant.

    Bygga Ändra Variabler mha widget.el.

    Fixa så LysKOM och complete.el fungerar ihop genom att sätta om
    samma mappar som complete.el gör, till wrappers runt complete.el
    som kollar om completion är LysKOM-completion eller något annat.

    Nu när lyskom-bufferten återanvänds så kanske M-x lyskom inte ska
    döda bufferten om den misslyckas med att koppla upp sig...
    
    Det är knepigt att avmarkera raderade texter, eftersom man inte
    får se textnumret.
    
    lyskom-read-session-no hittar inte osynliga sessioner.

    Den försöker fortfarande följa hemliga kommentarer om
    kom-show-footnotes-immediately är satt.

    Endast gör fel ibland.

    Om man läser ett inlägg som har en fotnot (t ex 1449843) och vill
    spara det på fil, så blir det bara fotnoten som sparas.  Man vill
    nog spara minst själva huvudinlägget, och nog också fotnoterna
    samtidigt.

    Om ett namn som fylls i i efterhand gör att raden blir för lång,
    så scrollar klienten ibland trots att den inte borde. [Troligen
    fixat]

    sentinelmeddelanden i ikoniferade frames buggar. Prova att kasta
    ut en session i ett ikonifierat fönster. Eller kanske till och med
    bara i en gömd buffert. (HEISENBUG?)

    text 1306568 [omöjligt att spåra]

    kom-review-tree på en text med fotnoter visar fotnoterna på en
    gång. Är det en bug?

    Fotnoter som visas på en gång filtreras inte. [verkar fixat]

    lyskom-add-membership gör membership-listan sorterad, vilket inte
    prefetch-koden är gjord för. Alltså borde det kunna bli problem
    att gå med i möten om man ger dem fel prioritet.

    När jag ska läsa en kommentar till ett brev i min brevlåda så blir
    prompten "Läsa nästa brev" i stället för "Läsa nästa
    kommentar". Kommentaren ligger inte i brevlådan. (LÅGPRIORITET)

-------- Allmänna förbättringar

    Modifiera interna datastrukturer vid utträd.

    Strunta i hemliga texter vid åar.

    Gör inte nästa kommando efter en filtrering. Kontrollera med
    variabel.

    Sortera vilkaslistan efter t.ex. idletid.
    
    Fixa klart z-initiate-get-map. (BEHÖVS INTE)

    När man skickar in en kommentar borde klienten kolla att inga nya
    kommentarer till texten har skrivits under tiden.

    Inför en membership-cache.

    Skriv inte ut stora fonoter på en gång.

    Inläggsnumren borde vara mer kontextkänsliga.  Om man klickar på
    ett inläggs eget nummer, alltså det som står precis innan datumet
    och det som står inom parentesen precis efter inläggstexten, så
    vill man antagligen inte återse det, eftersom man ju bevisligen
    har det framför sig.  I stället vill man antagligen kommentera
    det. (IGNORERAT FÖR TILLFÄLLET -- JAG GILLADE DET INTE /dcb)

    Har detta att göra med lite för optimistisk cache att göra? Kanske
    bör man läsa om person-staten innan man varnar för lapp på dörren?

    Visa fotnoter på ett bättre sätt.

    Presentationer ska ha samma mottagare som tidigare
    presentationer. Kommandot kom-review-comments visar fotnoter sist,
    inte först.

    Det skulle vara bra om skönsvärde för att skriva fotnot vore den
    senaste text man själv skrev, inte den senaste man läste.

    Klickbara kommandon.

    Reentrant blocking-do


-------- Fixade saker

    Jag har satt kom-show-footnotes-immediately till nil. Det verkar
    som man inte får läsa fotnötter först då, t ex fick jag läsa
    1443562 (en vanlig kommentar) och trädet under det innan jag fig
    läsa 1443602 (en fotnot till 1443554. Det är inte första gången
    det händer.

    Återse igen (kom-review-last-normally-read) borde kanske använda
    buffertlokala variabler för vilket inlägg som är det senaste man
    har läst, så man kan återse det senaste i det KOM man är i.

    Definiera faces när man startar klienten istället för när den
    laddas.

    Completion bryr sig inte om MUSTMATCH-parametern. (FIXAT)

    Om KOMNAME är satt till "" så kommer completionkoden att försöka
    komplettera det till alla personer. Det vill man *inte*. (FIXAT)
    (lyskom-lookup-conf-by name är snabbare på att returnera nil).

    Man kan inte skicka in inlägg med kom-emacs-knows-iso-8859-1 satt
    till nil. (FIXAT)

    LysKOMs completing-read är skit. Den gör fel. Den borde skrivas om.
    (FIXAT)

    lyskom-try-complete-partials borde returnera exakta matchar före
    längsta match. Nu blir (lyskom-try-complete-partials "link"
    '(("(foo) link (bar)" . 1) ("linkfoobar" . 2))) "linkfoobar", inte
    "(foo) link (bar)". (FUNKTIONEN ERSATT; FIXAT)

    M-> i prioritera-bufferten. Text 1320736. (FIXAT)

    Om man försöker logga in med en förkortning som matchar flera namn
    tror klienten att man inte finns. (FIXAT?)

    Lista meddelanden via fjärrkontroll listar baklänges. (FIXAT)

    Ändra variabler klarar inte att hantera buffertlokala variabler. FIXAT.

    Återinför Olästa

    Completion-koden är ivägen när man vill skapa nya personer. [Nåja,
    inte så mycket. Det är bara att man inte får skapa namn som är
    prefix till existerande namn]

    När det frågas om alla mottagare av ett inlägg är relevanta så
    vore det bra om bufferten scrollades upp så att man fick se dem...
    [FIXAT]

