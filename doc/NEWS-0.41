
		       Nyheter i lyskom.el 0.41
		       ========================

Version 0.41 av elispklienten finns nu tillgänglig. Den innehåller
rättningar på ett par mer eller mindra allvarligar buggar i 0.40 och
ett par nya finesser.

Det viktigaste skälet till att släppa en ny version nu är att ett
antal buggar som har rapporterats in absurdum har fixats. Tyvärr
innebär det att en del saker som inte är mogna för release också
slinker med.


* Fitjurs och förbättringar

** Allting går fortare, på grund av lite intelligentare
   parser. Inloggningsfasen går t.ex. ungefär tre gånger så fort.

** Innehållet i bufferten scrollas mer kontinuerligt allteftersom
   utmatning kommer. Tidigare scrollade den bara när man fick en
   prompt. Med det nyare beteendet är det lättare att se att något
   händer och man får se information tidigare. Detta beteende kan
   styras med variabeln kom-continuous-scrolling.

** Man blir inte längre ombedd att skriva en presentation när man
   skapar hemliga möten.

** Kommandot "Återse det föregående kommenterade"
   (kom-view-previous-commented-text) är nytt, och finns på åK.

** Information om vem som har adderat en kommentarslänk visas nu i
   kommentaren.

** Det kan gå mycket fortare än förut. Detta görs genom att utskrift
   av namn och information om kommentarslänkar fördröjs om de inte
   redan finns i cachen. Detta kan eventuellt bli besvärligt om man
   använder en långsam terminal. Beteendet kan styras med variabeln
   kom-delayed-printing.

   I denna version är detta avslaget per default, eftersom vi inte har
   testat att det fungerar tillfredsställande, men vi uppmanar alla
   att testa att sätta kom-delayed-printing till t och berätta om
   eventuella problem.

** Nu används de särskilda anrop som finns i protokollet för att berätta för
   servern vad klienten heter.

** Prioritera möten är omskriven. Den uppdaterar informationen i
   klienten betydligt snabbare än den gamla versionen, sorterar möten
   i prioritetsordning, på samma sätt klienten gör när man läser.
   Denna omskrivning är inte ordentligt testad och borde inte ha
   släpps riktigt än.

** Kommandot "återse första" (finns på åf) har lags till. Återse
   första gör precis samma sak som återse senaste med negativt
   argument.

** Återse senaste frågar hur många inlägg man vill se.

** Det finns en lyskom-before-command-hook som körs före varje
   kommando.

** Man får återigen se att det finns kommentarer man inte får läsa
   till inlägg. Detta beteende försvann av någon anledning i någon
   tidigare version.

* Bugfixar

** Återse senaste fungerar! De problem som rapporterats om detta
   kommando borde vara lösta i denna version.

** lyskom.el går nu igenom bytekompileringen nästan helt utan
   varningar. De återstående varningarna om odefinierade funktioner
   kan lugnt ignoreras.

** Bufferten positioneras rätt från början om man använder
   kom-page-before-command.

** Det är svårare att få klienten att stoppa köerna av misstag.

** Man kan nu trycka 'åak' direkt efter att ha skrivit en kommentar
   genom att trycka på 'k' igen.

** Ett antal mindre buggar har fixats.

* Välkända buggar som inte behöver rapporteras igen (och igen (och igen))

** Elispklienten hänger troligen fortfarande ibland men vi vet inte
   varför. Det är numera lite enklare att avbryta och några hängningar
   har eliminerats, men problemet är inte löst. Problemet är att emacs
   gör poll() upprepat, trots att det rimligen borde finnas data
   tillgängligt. Det kan vara ett kodningsfel, det kan vara en bug i
   Emacs och det kan kanske vara så att svaret helt enkelt dröjer. Vi
   har numera en explicit timeout som per default är satt till en
   sekund, så emacs bör inte dra 100% CPU även om den fortfarande
   stannar ibland.

** Man kan inte filtrera anonyma inlägg eller inlägga av personer som
   inte längre existerar. Den här buggen har låg prioritet.

** Återse senaste och återse första kan ta väldigt lång tid om de
   måste söka igenom många texter. Den kommer speciellt att ta lång
   tid om man återser fler inlägg än en person har skrivit till ett
   möte med många inlägg. Detta är egentligen inte en bug, men det är
   lika bra att nämna det så ingen rapporterar det i onödan.

** Om det kommer asynkrona meddelanden lite olyckligt så kommer
   kom-first-line-face att användas på för många rader. Den här buggen
   är har låg prioritet. Eventuellt är buggen fixad: ingen minns
   säkert.

** Om man går ur ett möte medan man prioriterar möten kan man inte
   spara den nya prioriteringen. Denna bug kommer nog att fixas på
   något vis såsmåningom. 

** Att försöka återse sina inlägg i någon annans brevlåda fungerar
   inte så bra. Det tar lång tid och resultatet blir noll och intet.


Migrering från 0.38 till nyare versioner
----------------------------------------

Prioritera om möten med prioritet 0 till en högre prioritet. I
framtiden (och delvis redan nu) så kommer prioritet 0 att betyda
passivt medlemsskap (man läser inte mötet men servern minns vad man
har läst tidigare).

Vissa variabler skall ha nya värden. Följande variabler är av
speciellt intresse (se dokumentationen för respektive variabel i Ändra
variabler eller med C-h v):

kom-ding-on-personal-messages (sätt till siffra, antal pip)
kom-ding-on-group-messages (sätt till siffra, antal pip)
kom-ding-on-common-messages (sätt till siffra, antal pip)

LysKOM använder andra hookar än förr. Numera används i första hand
kom-login-hook, lyskom-after-load-hook och lyskom-mode-hook.
kom-login-hook lagras i servern och körs när en session loggar in.
lyskom-after-load-hook körs när lyskom.elc har laddats in i Emacs.
lyskom-mode-hook körs när man går in i lyskom-mode. Saker som
kom-do-when-starting och liknande finns inte längre. Om din LysKOM
inte beter sig som du förväntar vid inloggningen så kan det vara så
att du använder en hook som inte längre finns.

Om du har gjort egen färgsättning i elispklienten så fär du göra om.
Färger som definieras i .emacs kommer att skrivas över. Definiera i
stället om färgerna i lyskom-after-load-hook. Se dokumentationen av
kom-default-face-scheme och lyskom-face-schemes för mer information. 

Hanteringen av färger kan nog ändras igen om vi kommer på ett
smidigare sätt att göra det.

Local variables:
mode: outline
End:
