
		       Nyheter i lyskom.el 0.45
		       ========================

Version 0.45 av elispklienten finns nu tillgänglig på följande URL.

       <URL:ftp://ftp.lysator.liu.se/pub/lyskom/elisp-client/>

Filen heter lyskom-0.45.tar.gz, och en kopia av den text du läser just
nu finns under namnet NEWS-0.45 samt under namnet NEWS-0.45 i
tar-arkivet.

Se även MIGRATION-0.44-0.45 för information som är av intresse när man
byter från 0.44 till 0.45 (samma information finns här, men är mer
detaljerad i den andra filen.)

                                David Byers   <byers@lysator.liu.se>
                                David Kågedal <davidk@lysator.liu.se>


          =================================================
                            PERSONAL SÖKES

          David & David har fått en massa riktigt jobb på
          halsen, och David håller dessutom på att hacka i
          server, så vi har rätt lite tid över till att 
          hacka elispklient. Det vore trevligt om någon 
          eller några andra ville hjälpa till. Det är 
          faktiskt ganska så skoj. Koden är inte alls så
          hemsk som man kan tro.

          Det vore skoj med fler och bättre översättningar
          av elispklienten till andra språk. Om du kan ett
          annat språk och gillar LysKOM, och kan tänka dig
          att skriva en översättning, så skicka mail till
          byers@lysator.liu.se. Du behöver inte kunna
          programmera för att göra översättningen.

          Om du tycker att språk som Japanska är roliga så
          får du gärna hjälpa till att göra LysKOM MULE och
          XEmacs/MULE-kompatibel, så att man kan skriva
          sina inlägg på Japanska och Kinesiska. Antagligen
          behövs det inte så mycket arbete för att få detta
          att fungera.

          =================================================



* Fitjurs och förbättringar

** Ett nytt kommando, "Inställningar (för) LysKOM" har lagts till. Det 
   ger ett (förhoppningsvis) enklare och bättre sätt att ställa in
   vanliga variabler i Elispklienten.

** Inlägg som innehåller långa rader kan automagiskt få nya
   radbrytningar. Inlägg, eller delar av inlägg, som uppfyller vissa
   kriterier bryts inte om. Just nu är kriterierna väldigt
   konservativa, men detta borde fungera rätt bra på vanlig text. 
   Kommandot "Återse omodifierat" är bra om man vill se hur inlägget
   egentligen såg ut. Variabeln fill-column styr hur breda inlägg får
   vara, under förutsättning att den inte ligger allt för nära
   fönstrets högerkant (för då styr fönsterbredden.) Variabeln
   kom-autowrap styr vilka inlägg som bryts om.

** Om man har en WWW-proxy som vet vad CONNECT betyder så kan man köra
   elispklienten genom en brandvägg. Sätt variabeln kom-www-proxy till
   brandväggens namn och port (tex. "www-proxy:81") och prova. Det är
   meningen att man skall kunna sätta kom-www-proxy till en lista för
   att styra vilka servrar man vill använda vilka proxys mot. Gör 
   C-h v kom-www-proxy för mer detaljer.

** Det går att köra elispklienten under XEmacs. Man behöver minst
   version 19.14 av XEmacs för att det skall fungera, men på grund av
   buggar i XEmacs 19.14 så kan LysKOM ibland dra förskräckligt mycket
   CPU, och fönsterhanteringen kan bli galen. Dessa buggar skall vara
   fixade i 19.15 och 20.2.

** Man kan byta språk under körning. För tillfället finns engelska och
   svenska att tillgå, men om någon känner för att översätta klienten
   till något annat språk, till exempel esperanto, swahili, urdu eller
   japanska så tar vi tacksamt emot hjälpen. Kommandot "Ändra språk"
   kan vara skoj att prova.

** I variabeln som väljer hur URLer hanteras kan man lägga in symbolen
   "default". Då kommer LysKOM att använda browse-url för att visa
   URLen. Ett lämpligt värde för kom-url-viewer-preferences är således
   '(emacs default). Då kommer ftp, file och mailto-URLer att visas i
   Emacs och allt annat visas beroende på hur
   browse-url-browser-function är satt.

** Elispklienten förstår numera ett antal felaktiga URLer.

** Vi har bytt en massa tangentbordskombinationer i
   inläggsredigerinsmoden. Alla tangentbordskommandon som började md
   C-c och följdes av bokstäver har följst nu av control + samma
   bokstäver. Till exempel sitter addera extra-kopiemottagare inte på
   C-c a e, utan på C-c C-a C-e. Detta har vi gjort eftersom alla
   kombinationer av C-c <bokstav> är reserverade för användare och
   minor modes.

** C-c a k i editbufferten, som numera är C-c C-a C-k lägger inte till
   en extra-kopiemottagare längre, utan lägger till en kommentarslänk,
   så det blir enklare att kommentera flera inlägg samtidigt.

** C-c C-a C-f i editbufferten lägger till en mottagare och gör om
   alla gamla mottagare till extra-kopiemottagare. Praktiskt för att
   flytta en diskussion från ett möte till ett annat.

** Om man har calc installerat så kan man använda kommandot Beräkna
   för att skicka uttryck till calc ock få dem presenterade i LysKOM.

** Om man har ispell installerat kan man använda kommandot
   kom-ispell-message. Det finns i menyn och är bundet till C-c C-s. 
   Man väljer ordlista genom att sätta kom-ispell-dictionary till
   ordlistan man vill använda ("svenska" eller "svenska8" brukar vara
   ett bra val.)

** Elispklienten kodar ajtomagiskt av HTML och enriched text in
   inlägg. Inläggen måste vara markerade på ett speciellt för att det
   skall fungera, och för HTML så måste man ha en rätt färsk version
   av w3 installerad. Man kan även skicka in text som enriched genom
   att sätta variabeln lyskom-send-text-transform-function till
   lyskom-send-enriched. 

** En ny hook, lyskom-send-text-hook har skapats. Se
   variabeldokumentationen för detaljer. För att få automagisk
   stavningskontroll (kräver ispell), gör (add-hook
   'lyskom-send-text-hook 'lyskom-ispell-text) och se till att
   kom-ispell-dictionary är satt vettigt (notera att
   kom-ispell-dictionary sparas servern.) Vettigt innebär antagligen
   "svenska" om du kör LysKOM.

** Numera går det alldeles utmärkt att gå med och gå ur möten medan
   mötesprioriteringsbufferten är uppe. Den hålls synkroniserad med
   LysKOM-sessionen.

** En nygammal prefetch har börjat användas. Detta gör att allting går
   mycket fortare, men har sidoeffekten att det kan se ut som om man
   har läst ut LysKOM innan klienten har läst in alla information från
   servern.

** Färgläggning av KOM-bufferten sker även under Windows-versionen av
   Emacs. Färgläggning borde till och med ske under alla fönstersystem.

** Kommandot "Återse fler inlägg", bunder till "åy" (som i Återse
   Ytterligare) fortsätter ett återsekommando från den plats det
   slutade, med samma kriterier. Det innebär att Återse senaste 10 av
   XX till YY följt av Återse 10 fler inlägg kommer att visa de
   senaste 20 inläggen av XX till YY i två omgångar (10 per kommando.)

** kom-permissive-completion är satt till t per default.

** LysKOM-bufferten är skrivskyddad (igen), och har undo-information
   avslagen.

** Variablerna kom-prompt-format, lyskom-prompt-text och
   lyskom-prompt-executing-default-command-text har ersatts av
   kom-user-prompt-format och kom-user-prompt-format-executing.

** Vid körning i administratörsmod så styr variablerna
   kom-enabled-prompt-format och kom-enabled-prompt-format-executing
   promptens utseende.

** När man skall skriva en fotnot till ett inlägg blir default det
   senaste man läste, om man även skrev det, och annars det senaste
   man själv skrev.

** kom-edit-texts-in-window kan numera vara new-frame eller
   other-frame för att skriva texter i ett nytt fönster eller i ett
   annat (men existerande) fönster.

** Variablerna kom-prioritize-in-window styr var man prioriterar möten
   och kom-customize-in-window styr var man gör inställningar i
   LysKOM. Båda fungerar helt analogt med kom-edit-texts-in-window.
   Analogt finns kom-list-membership-in-window och
   kom-view-commented-in-window.

** Delar av bufferthanteringen har skrivits om så att den är enklare
   att använda. Detta kan leda till att inläggsskrivarfönstret beter
   sig lite annorlunda. Rapportera om något konstigt inträffar.

** Variabeln kom-ding-on-new-letter kontrollerar hur elispklienten
   piper när det kommer brev. Default är att inte pipa alls.

** Elispklienten känner igen e-mail-adresser i inläggstexter.
   Hanteringen är dock något primitiv eftersom man inte kan välja
   vilket program som skall användas för att skicka mail.

** Textnummer, författarnamn och liknande i inläggsskrivarbufferten är
   aktiva och har samma menyer som i LysKOM-bufferten. Musens
   mittenknapp aktiverar som vanligt knapparna, men om man klickar där
   det inte finns någon knapp så klistrar den in text som vanligt i
   stället.

** Kommandona Medlem, Utträd och Endast har blivit både snabbare och
   mer robusta.

** Om kom-check-for-new-comments inte är nil kommer klienten att
   kontrollera att man inte har olästa kommentarer till en text man
   håller på kommentera. 

** Variabeln kom-dont-read-saved-variables kan användas för att styra
   vilka variables som läses från servern. Om den är nil fungerar allt
   som vanligt. Om den är t så kommer inga variabler att läsas från
   servern och om den är en lista så kommer bara de variabler som inte 
   nämns i listan att läsas från servern.

** En ny hook, lyskom-change-conf-hook anropas nu vid mötesbyten. Den
   är tänkt för folk som vill byta variabelvärden i vissa möten.
   Funktioner i hooken anropas med två argument. Första argumentet är
   vilket möte man står i och andra är vilket möte man håller på att
   gå till. 

** Historian över gamla saker man har matat in i minibufferten är mer
   uppdelad nu. Till exempel så har aKommandon en egen historielista,
   meddelanden har en och uttryck att beräkna en.

** Elispklienten är snabbare överlag.



* Bugfixar

** Man kan numera stoppa in vektorer som tangentbordsmakron i
   kom-do-when-done. 

** Funktionerna lyskom-send-message-resize-minibuffer och
   lyskom-send-message-auto-fill är bra att stoppa in i
   lyskom-minibuffer-send-message-setup-hook fungerar numera. 

** Koden för att läsa in textmappar har optimerats rejält. Det,
   tillsammans med den nya prefetchen gör att man kan läsa I]M, även
   med flera utlästa trådar.

** Completion fungerar bättre. Numera borde completion avslutas med SPC
   bara när det verkligen passar, och matchningen av namn med nästlade
   parenteser skall fungera bättre.

** Helt kompatibel med protokollversion 9.

** Chanserna att man får klienten att tappa orineteringen när man
   trycker C-g har minskat. Nackdelen med detta är att C-g kan ge lite
   sämre responstid, men det borde inte inte bli så mycket längre.

** Koden för att hitta urinlägg bör numera klara även mycket långa
   kommentarskedjor.

** Säkert massor av andra småfixar...



* Kända buggar som inte är vårt fel

** Under XEmacs verkar interaktion med klienten gå trögt när det
   kommer mycket data från servern. Såvitt vi kan avgöra kan vi inte
   göra något åt saken utan massiv omskrivning av hur XEmacs
   prioriterar indata från olika källor.

** Under XEmacs visas ibland inte prompten. Detta är förmodligen en
   bug i XEmacs.

** Under XEmacs, om man öppnar en ikonifierad Emacs och omedelbart
   trycker SPC verkar Emacs hänga sig. Tryck C-g ett par gånger så
   hämtar den sig. Detta beror förmodligen på en bug i XEmacs
   event-hantering.

** XEmacs som den ser ut i skrivande stund är långsam på att hantera
   text långt ned i mycket stora buffertar. Ryktet gör gällande att
   det håller på att åtgärdas.

** LysKOM kan krascha betaversioner av XEmacs.
